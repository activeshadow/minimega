(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-9184ba1e"],{"0ed8":function(e,t,a){e.exports=a.p+"assets/img/not-available.54b0734a.png"},"106d":function(e,t,a){"use strict";a.r(t);var s=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{staticClass:"content"},[s("b-modal",{attrs:{active:e.expModal.active,"on-cancel":e.resetExpModal,"has-modal-card":""},on:{"update:active":function(t){return e.$set(e.expModal,"active",t)}}},[s("div",{staticClass:"modal-card",staticStyle:{width:"25em"}},[s("header",{staticClass:"modal-card-head"},[s("p",{staticClass:"modal-card-title"},[e._v(e._s(e.expModal.vm.name?e.expModal.vm.name:"unknown")+" VM")])]),s("section",{staticClass:"modal-card-body"},[s("p",[e._v("Host: "+e._s(e.expModal.vm.host))]),s("p",[e._v("IPv4: "+e._s(e._f("stringify")(e.expModal.vm.ipv4)))]),s("p",[e._v("CPU(s): "+e._s(e.expModal.vm.cpus))]),s("p",[e._v("Memory: "+e._s(e._f("ram")(e.expModal.vm.ram)))]),s("p",[e._v("Disk: "+e._s(e.expModal.vm.disk))]),s("p",[e._v("Uptime: "+e._s(e._f("uptime")(e.expModal.vm.uptime)))]),s("p",[e._v("Network(s): "+e._s(e._f("lowercase")(e._f("stringify")(e.expModal.vm.networks))))]),s("p",[e._v("Taps: "+e._s(e._f("lowercase")(e._f("stringify")(e.expModal.vm.taps))))]),e.expModal.snapshots?s("p",[e._v("\n          Snapshots:\n          "),s("br")]):e._e(),e._l(e.expModal.snapshots,(function(t,a){return s("p",{key:a},[s("b-tooltip",{attrs:{label:"restore this snapshot",type:"is-light is-right"}},[s("b-icon",{staticStyle:{color:"#686868"},attrs:{icon:"play-circle"},nativeOn:{click:function(a){return e.restoreSnapshot(e.expModal.vm.name,t)}}})],1),e._v("\n          "+e._s(t)+"\n        ")],1)})),s("p")],2),s("footer",{staticClass:"modal-card-foot buttons is-right"},[e.adminUser()?s("div",[e.expModal.vm.running?[s("b-tooltip",{attrs:{label:"pause a vm",type:"is-light"}},[s("b-button",{staticClass:"button is-danger",attrs:{"icon-left":"pause"},on:{click:function(t){return e.pauseVm(e.expModal.vm.name)}}})],1)]:[s("b-tooltip",{attrs:{label:"start a vm",type:"is-light"}},[s("b-button",{staticClass:"button is-success",attrs:{"icon-left":"play"},on:{click:function(t){return e.startVm(e.expModal.vm.name)}}})],1)]],2):e._e(),e.expModal.vm.running?s("div",[e._v("\n          \n        "),s("b-tooltip",{attrs:{label:"create a snapshot",type:"is-light"}},[s("b-button",{staticClass:"button is-light",attrs:{"icon-left":"camera"},on:{click:function(t){return e.captureSnapshot(e.expModal.vm.name)}}})],1)],1):e._e(),e.experimentUser()?s("div",[e._v("\n          \n        "),s("b-tooltip",{attrs:{label:"create a backing image",type:"is-light"}},[s("b-button",{staticClass:"button is-light",attrs:{"icon-left":"save"},on:{click:function(t){return e.diskImage(e.expModal.vm.name,e.expModal.vm.disk)}}})],1)],1):e._e(),e.experimentUser()?s("div",[e._v("\n          \n        "),s("b-tooltip",{attrs:{label:"redeploy a vm",type:"is-light"}},[s("b-button",{staticClass:"button is-warning",attrs:{"icon-left":"power-off"},on:{click:function(t){return e.redeploy(e.expModal.vm)}}})],1)],1):e._e(),e.experimentUser()?s("div",[e._v("\n         \n        "),s("b-tooltip",{attrs:{label:"kill a vm",type:"is-light"}},[s("b-button",{staticClass:"button is-danger",attrs:{"icon-left":"trash"},on:{click:function(t){return e.killVm(e.expModal.vm.name)}}})],1)],1):e._e()])])]),s("b-modal",{attrs:{active:e.vlanModal.active,"has-modal-card":""},on:{"update:active":function(t){return e.$set(e.vlanModal,"active",t)}}},[s("div",{staticClass:"modal-card",staticStyle:{width:"25em"}},[s("header",{staticClass:"modal-card-head"},[s("p",{staticClass:"modal-card-title"},[e._v("Change the VLAN")])]),s("section",{staticClass:"modal-card-body"},[s("font",{attrs:{color:"#202020"}},[e._v("\n        Move interface "+e._s(e.vlanModal.vmNetIndex)+" from "+e._s(e._f("lowercase")(e.vlanModal.vmFromNet))+" to a new one for the "+e._s(e.vlanModal.active?e.vlanModal.vmName:"unknown")+" VM.\n      ")]),s("br"),s("br"),s("b-field",[s("b-select",{attrs:{expanded:""},model:{value:e.vlan,callback:function(t){e.vlan=t},expression:"vlan"}},[s("option",{attrs:{value:"0"}},[e._v("disconnect")]),e._l(e.experiment.vlans,(function(t,a){return s("option",{key:a,domProps:{value:t}},[e._v("\n              "+e._s(e._f("lowercase")(t.alias))+" ("+e._s(t.vlan)+")\n            ")])}))],2)],1)],1),s("footer",{staticClass:"modal-card-foot buttons is-right"},[s("button",{staticClass:"button is-success",on:{click:function(t){return e.changeVlan(e.vlanModal.vmNetIndex,e.vlan,e.vlanModal.vmFromNet,e.vlanModal.vmName)}}},[e._v("\n          Change\n        ")])])])]),s("b-modal",{attrs:{active:e.redeployModal.active,"on-cancel":e.resetRedeployModal,"has-modal-card":""},on:{"update:active":function(t){return e.$set(e.redeployModal,"active",t)}}},[s("div",{staticClass:"modal-card",staticStyle:{width:"25em"}},[s("header",{staticClass:"modal-card-head"},[s("p",{staticClass:"modal-card-title"},[e._v("Redeploy the VM")])]),s("section",{staticClass:"modal-card-body"},[s("font",{attrs:{color:"#202020"}},[e._v("\n          Modify any of the following current settings and redeploy the "+e._s(e.redeployModal.name)+" VM.\n          "),s("p"),e._v("\n          CPUs: \n          "),s("b-tooltip",{attrs:{label:"menu for assigning cpus",type:"is-dark"}},[s("b-select",{attrs:{value:e.redeployModal.cpus,expanded:""},on:{input:function(t){return e.redeployModal.cpus=t}}},[s("option",{attrs:{value:"1"}},[e._v("1")]),s("option",{attrs:{value:"2"}},[e._v("2")]),s("option",{attrs:{value:"3"}},[e._v("3")]),s("option",{attrs:{value:"4"}},[e._v("4")]),s("option",{attrs:{value:"5"}},[e._v("5")]),s("option",{attrs:{value:"6"}},[e._v("6")]),s("option",{attrs:{value:"7"}},[e._v("7")]),s("option",{attrs:{value:"8"}},[e._v("8")])])],1),s("p"),e._v("\n          Memory: \n          "),s("b-tooltip",{attrs:{label:"menu for assigning memory",type:"is-dark"}},[s("b-select",{attrs:{value:e.redeployModal.ram,expanded:""},on:{input:function(t){return e.redeployModal.ram=t}}},[s("option",{attrs:{value:"512"}},[e._v("512 MB")]),s("option",{attrs:{value:"1024"}},[e._v("1 GB")]),s("option",{attrs:{value:"2048"}},[e._v("2 GB")]),s("option",{attrs:{value:"3072"}},[e._v("3 GB")]),s("option",{attrs:{value:"4096"}},[e._v("4 GB")]),s("option",{attrs:{value:"8192"}},[e._v("8 GB")]),s("option",{attrs:{value:"12288"}},[e._v("12 GB")]),s("option",{attrs:{value:"16384"}},[e._v("16 GB")])])],1),s("p"),e._v("\n          Disk:\n          "),s("b-tooltip",{attrs:{label:"menu for assigning disk",type:"is-dark"}},[s("b-select",{attrs:{value:e.redeployModal.disk},on:{input:function(t){return e.redeployModal.disk=t}}},e._l(e.disks,(function(t,a){return s("option",{key:a,domProps:{value:t}},[e._v("\n                  "+e._s(t)+"\n              ")])})),0)],1),s("p"),e._v("\n          Replicate Original Injection(s):\n          "),s("b-tooltip",{attrs:{label:"menu for replicating injections",type:"is-dark"}},[s("b-select",{attrs:{value:e.redeployModal.inject,expanded:""},on:{input:function(t){return e.redeployModal.inject=t}}},[s("option",{attrs:{value:"true"}},[e._v("Yes")]),s("option",{attrs:{value:"false"}},[e._v("No")])])],1)],1)],1),s("footer",{staticClass:"modal-card-foot buttons is-right"},[s("button",{staticClass:"button is-success",on:{click:function(t){return e.redeployVm(e.redeployModal.name,e.redeployModal.cpus,e.redeployModal.ram,e.redeployModal.disk,e.redeployModal.inject)}}},[e._v("\n          Redeploy "+e._s(e.redeployModal.name)+"\n        ")])])])]),s("b-modal",{attrs:{active:e.diskImageModal.active,"has-modal-card":"","on-cancel":e.resetDiskImageModal},on:{"update:active":function(t){return e.$set(e.diskImageModal,"active",t)}}},[s("div",{staticClass:"modal-card",staticStyle:{width:"25em"}},[s("header",{staticClass:"modal-card-head"},[s("p",{staticClass:"modal-card-title"},[e._v("Create a Disk Image")])]),s("section",{staticClass:"modal-card-body"},[s("font",{attrs:{color:"#202020"}},[e._v("\n          Create disk image of the "+e._s(this.diskImageModal.vm)+" VM with filename:\n        ")]),s("br"),s("br"),s("b-field",{attrs:{type:e.diskImageModal.nameErrType,message:e.diskImageModal.nameErrMsg,autofocus:""}},[s("b-input",{attrs:{type:"text",focus:""},model:{value:e.diskImageModal.name,callback:function(t){e.$set(e.diskImageModal,"name",t)},expression:"diskImageModal.name"}})],1)],1),s("footer",{staticClass:"modal-card-foot buttons is-right"},[s("button",{staticClass:"button is-success",attrs:{disabled:!e.validate},on:{click:function(t){return e.backingImage(e.diskImageModal.vm,e.diskImageModal.name)}}},[e._v("\n          Create\n        ")])])])]),s("hr"),s("b-field",{attrs:{position:"is-left"}},[s("p",{staticClass:"control"}),s("h3",[e._v("Experiment: "+e._s(e.experiment.name))]),s("p")]),e.experimentUser()||e.experimentViewer()?s("b-field",{attrs:{position:"is-right"}},[s("b-autocomplete",{attrs:{placeholder:"Find a VM",icon:"search",data:e.filteredData},on:{input:e.searchVMs,select:function(t){return e.searchVMs(t)}},model:{value:e.search.filter,callback:function(t){e.$set(e.search,"filter",t)},expression:"search.filter"}},[s("template",{slot:"empty"},[e._v("No results found")])],2),s("p",{staticClass:"control"},[s("button",{staticClass:"button",staticStyle:{color:"#686868"},on:{click:function(t){return e.searchVMs("")}}},[s("b-icon",{attrs:{icon:"window-close"}})],1)]),e._v("\n       \n    "),s("p",{staticClass:"control buttons"},[e.adminUser()?s("b-button",{staticClass:"button is-danger",attrs:{slot:"trigger","icon-right":"stop"},on:{click:e.stop},slot:"trigger"}):e._e()],1)],1):e._e(),s("div",[s("b-tabs",{on:{change:e.updateFiles}},[s("b-tab-item",{attrs:{label:"Table"}},[s("b-table",{attrs:{data:e.experiment.vms,paginated:e.table.isPaginated&&e.paginationNeeded,"backend-pagination":"",total:e.table.total,"per-page":e.table.perPage,"pagination-simple":e.table.isPaginationSimple,"pagination-size":e.table.paginationSize,"backend-sorting":"","default-sort-direction":"asc","default-sort":"name"},on:{"page-change":e.onPageChange,sort:e.onSort},scopedSlots:e._u([{key:"default",fn:function(t){return[s("b-table-column",{attrs:{field:"name",label:"VM Name",width:"150",sortable:"",centered:""}},[e.experimentUser()?[s("b-tooltip",{attrs:{label:"start/stop/redeploy the vm",type:"is-dark"}},[s("span",{staticClass:"tag is-medium",class:e.decorator(t.row.running,t.row.redeploying)},[s("div",{staticClass:"field"},[s("div",{on:{click:function(a){return e.getInfo(t.row)}}},[e._v("\n                        "+e._s(t.row.name)+"\n                      ")])])])])]:[s("b-tooltip",{attrs:{label:"get info for the vm",type:"is-dark"}},[s("span",{staticClass:"tag is-medium",class:e.decorator(t.row.running,!t.row.redeploying)},[s("div",{staticClass:"field"},[s("div",{on:{click:function(a){e.expModal.active=!0,e.expModal.vm=t.row}}},[e._v("\n                        "+e._s(t.row.name)+"\n                      ")])])])])],t.row.redeploying?s("section",[s("p"),s("b-progress",{attrs:{size:"is-small",type:"is-warning","show-value":"",value:t.row.percent,format:"percent"}})],1):e._e()],2),s("b-table-column",{attrs:{field:"screenshot",label:"Screenshot"}},[!t.row.running||t.row.redeploying||t.row.screenshot?t.row.running&&!t.row.redeploying&&t.row.screenshot?[s("a",{attrs:{href:"/api/v1/experiments/"+e.$route.params.id+"/vms/"+t.row.name+"/vnc?token="+e.$store.state.token,target:"_blank"}},[s("img",{attrs:{src:t.row.screenshot}})])]:t.row.redeploying?[s("img",{attrs:{src:a("f898")}})]:[s("img",{attrs:{src:a("1801")}})]:[s("a",{attrs:{href:"/api/v1/experiments/"+e.$route.params.id+"/vms/"+t.row.name+"/vnc?token="+e.$store.state.token,target:"_blank"}},[s("img",{attrs:{src:a("0ed8")}})])]],2),s("b-table-column",{attrs:{field:"host",label:"Host",width:"150",sortable:""}},[e._v("\n              "+e._s(t.row.host)+"\n            ")]),s("b-table-column",{attrs:{field:"ipv4",label:"IPv4",width:"150"}},e._l(t.row.ipv4,(function(t){return s("div",[e._v("\n                "+e._s(t)+"\n              ")])})),0),s("b-table-column",{attrs:{field:"network",label:"Network"}},[e.experimentUser()&&t.row.running?[s("b-tooltip",{attrs:{label:"change vlan(s)",type:"is-dark"}},[s("div",{staticClass:"field"},e._l(t.row.networks,(function(a,n){return s("div",{key:n,on:{click:function(s){e.vlanModal.active=!0,e.vlanModal.vmName=t.row.name,e.vlanModal.vmFromNet=a,e.vlanModal.vmNet=t.row.networks,e.vlanModal.vmNetIndex=n}}},[e._v("\n                      "+e._s(e._f("lowercase")(a))+"\n                    ")])})),0)])]:[e._v("\n                "+e._s(e._f("lowercase")(e._f("stringify")(t.row.networks)))+"\n              ")]],2),s("b-table-column",{attrs:{field:"taps",label:"Taps"}},[e.experimentUser()&&t.row.running?[s("b-tooltip",{attrs:{label:"manage pcap",type:"is-dark"}},[s("div",{staticClass:"field"},e._l(t.row.taps,(function(a,n){return s("div",{key:n,class:e.tapDecorator(t.row.captures,n),on:{click:function(a){return e.handlePcap(t.row,n)}}},[e._v("\n                      "+e._s(e._f("lowercase")(a))+"\n                    ")])})),0)])]:[e._v("\n                "+e._s(e._f("lowercase")(e._f("stringify")(t.row.taps)))+"\n              ")]],2),s("b-table-column",{attrs:{field:"uptime",label:"Uptime",width:"165"}},[e._v("\n              "+e._s(e._f("uptime")(t.row.uptime))+"\n            ")])]}}])},[s("template",{slot:"empty"},[s("section",{staticClass:"section"},[s("div",{staticClass:"content has-text-white has-text-centered"},[e._v("\n                Your search turned up empty!\n              ")])])])],2),s("br"),e.paginationNeeded?s("b-field",{attrs:{grouped:"",position:"is-right"}},[s("div",{staticClass:"control is-flex"},[s("b-switch",{attrs:{size:"is-small",type:"is-light"},on:{input:e.switchPagination},model:{value:e.table.isPaginated,callback:function(t){e.$set(e.table,"isPaginated",t)},expression:"table.isPaginated"}},[e._v("Pagenate")])],1)]):e._e()],1),s("b-tab-item",{attrs:{label:"Files"}},[e.files&&!e.files.length?[s("section",{staticClass:"hero is-light is-bold is-large"},[s("div",{staticClass:"hero-body"},[s("div",{staticClass:"container",staticStyle:{"text-align":"center"}},[s("h1",{staticClass:"title"},[e._v("\n                  There are no files available.\n                ")])])])])]:[s("ul",{staticClass:"fa-ul",staticStyle:{"list-style":"none"}},e._l(e.files,(function(t,a){return s("li",{key:a},[s("font-awesome-icon",{staticClass:"fa-li",attrs:{icon:"file-download"}}),s("a",{attrs:{href:"/api/v1/experiments/"+e.experiment.name+"/files/"+t+"?token="+e.$store.state.token,target:"_blank"}},[e._v("\n                "+e._s(t)+"\n              ")])],1)})),0)]],2)],1)],1),s("b-loading",{attrs:{"is-full-page":!0,active:e.isWaiting,"can-cancel":!1},on:{"update:active":function(t){e.isWaiting=t}}})],1)},n=[],i=(a("a481"),a("75fc")),r=(a("28a5"),a("ac6a"),a("6762"),a("2fdb"),a("7f7f"),a("386d"),a("96cf"),a("3b8d")),o={beforeDestroy:function(){var e=Object(r["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:this.$options.sockets.onmessage=null;case 1:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}(),created:function(){var e=Object(r["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:this.$options.sockets.onmessage=this.handler,this.updateExperiment();case 2:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}(),computed:{filteredData:function(){var e=this;return this.search.vms.filter((function(t){return t.toLowerCase().indexOf(e.search.filter.toLowerCase())>=0}))},paginationNeeded:function(){return!(this.table.total<=this.table.perPage)},validate:function(){var e=/^[a-zA-Z0-9-_]*$/;return e.test(this.diskImageModal.name)?(this.diskImageModal.nameErrType="",this.diskImageModal.nameErrMsg="",!0):(this.diskImageModal.nameErrType="is-danger",this.diskImageModal.nameErrMsg="image names can only contain alphanumeric, dash, and underscore; we will add the file extension",!1)}},methods:{adminUser:function(){return["Global Admin","Experiment Admin"].includes(this.$store.getters.role)},experimentUser:function(){return["Global Admin","Experiment Admin","Experiment User"].includes(this.$store.getters.role)},experimentViewer:function(){return["Experiment Viewer"].includes(this.$store.getters.role)},searchVMs:function(e){null===e&&(e=""),this.search.filter=e,this.updateTable()},switchPagination:function(e){this.table.isPaginated=e,this.updateTable()},updateTable:function(){var e=this.table.currentPage,t=this.table.perPage;this.table.isPaginated||(e=0,t=this.experiment.vm_count);var a={resource:{type:"experiment/vms",name:this.$route.params.id,action:"list"},request:{sort_column:this.table.sortColumn,sort_asc:"asc"===this.table.sortOrder,page_number:e,page_size:t,filter:this.search.filter}};this.$socket.send(JSON.stringify(a))},onPageChange:function(e){this.table.currentPage=e,this.updateTable()},onSort:function(e,t){this.table.sortColumn=e,this.table.sortOrder=t,this.updateTable()},handler:function(e){var t=this;e.data.split(/\r?\n/).forEach((function(e){var a=JSON.parse(e);t.handle(a)}))},handle:function(e){switch(e.resource.type){case"experiment/vms":if("list"!=e.resource.action)return;this.experiment.vms=Object(i["a"])(e.result.vms),this.search.filter?this.table.total=e.result.total:this.table.total=this.experiment.vm_count,this.isWaiting=!1;break;case"experiment/vm":var t=e.resource.name.split("/"),a=this.experiment.vms;switch(e.resource.action){case"update":for(var s=0;s<a.length;s++)if(a[s].name==e.result.name){a[s]=e.result;break}break;case"delete":for(var n=0;n<a.length;n++)if(a[n].name==t[1]){a.splice(n,1);break}this.$buefy.toast.open({message:"The "+t[1]+" VM was killed.",type:"is-success"});break;case"start":break;case"starting":break;case"stop":break;case"stopping":break;case"redeploying":break;case"redeployed":break}break;case"experiment/vm/commit":var r=e.resource.name.split("/"),o=this.experiment.vms;switch(e.resource.action){case"commit":for(var l=0;l<o.length;l++){if(o[l].name==r[1]){o[l].redeploying=!1,o[l]=e.result.vm;var c=e.result.disk;this.$buefy.toast.open({message:"The backing image with name "+c+" for the "+r[1]+" VM was successfully created.",type:"is-success",duration:4e3})}this.experiment.vms=Object(i["a"])(o)}break;case"committing":for(var p=0;p<o.length;p++){if(o[p].name==r[1]){o[p].redeploying=!0,o[p].percent=0;var u=e.result.disk;this.$buefy.toast.open({message:"A backing image with name "+u+" for the "+r[1]+" VM is being created.",type:"is-warning",duration:4e3}),this.experiment.vms=Object(i["a"])(o)}break}break;case"progress":for(var d=(100*e.result.percent).toFixed(0),m=0;m<o.length;m++)if(o[m].name==r[1]){o[m].percent=d,this.experiment.vms=Object(i["a"])(o);break}break}break;case"experiment/vm/screenshot":var h=e.resource.name.split("/"),f=this.experiment.vms;switch(e.resource.action){case"update":for(var v=0;v<f.length;v++)if(f[v].name==h[1]){f[v].screenshot=e.result.screenshot;break}this.experiment.vms=Object(i["a"])(f);break}break;case"experiment/vm/capture":var g=e.resource.name.split("/"),b=this.experiment.vms;switch(e.resource.action){case"start":for(var y=0;y<b.length;y++)if(b[y].name==g[1]){null==b[y].captures&&(b[y].captures=[]),b[y].captures.push({vm:g[1],interface:e.result.interface,filename:e.result.filename});break}this.experiment.vms=Object(i["a"])(b),this.$buefy.toast.open({message:"Packet capture was started for the "+g[1]+" VM.",type:"is-success"});break;case"stop":for(var x=0;x<b.length;x++)if(b[x].name==g[1]){b[x].captures=null;break}this.$buefy.toast.open({message:"Packet capture was stopped for the "+g[1]+" VM.",type:"is-success"});break}break;case"experiment/vm/snapshot":var k=e.resource.name.split("/"),M=this.experiment.vms;switch(e.resource.action){case"create":for(var w=0;w<M.length;w++)M[w].name==k[1]&&(M[w].redeploying=!1,this.$buefy.toast.open({message:"The snapshot for the "+k[1]+" VM was successfully created.",type:"is-success",duration:4e3})),this.experiment.vms=Object(i["a"])(M);break;case"creating":for(var _=0;_<M.length;_++)M[_].name==k[1]&&(M[_].redeploying=!0,M[_].percent=0,this.$buefy.toast.open({message:"A snapshot for the "+k[1]+" VM is being created.",type:"is-warning",duration:4e3})),this.experiment.vms=Object(i["a"])(M);break;case"progress":for(var C=(100*e.result.percent).toFixed(0),$=0;$<M.length;$++)if(M[$].name==k[1]){M[$].percent=C,this.experiment.vms=Object(i["a"])(M);break}break;case"restore":for(var V=0;V<M.length;V++)M[V].name==k[1]&&(M[V].redeploying=!1,this.$buefy.toast.open({message:"The "+k[1]+" VM was successfully reverted to a previous snapshot.",type:"is-success",duration:4e3})),this.experiment.vms=Object(i["a"])(M);break;case"restoring":for(var I=0;I<M.length;I++)M[I].name==k[1]&&(M[I].redeploying=!0,M[I].percent=0,this.$buefy.toast.open({message:"A snapshot for the "+k[1]+" VM is being restored.",type:"is-warning",duration:4e3})),this.experiment.vms=Object(i["a"])(M);break}break}},updateExperiment:function(){var e=Object(r["a"])(regeneratorRuntime.mark((function e(){var t,a;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,this.$http.get("experiments/"+this.$route.params.id);case 3:return t=e.sent,e.next=6,t.json();case 6:a=e.sent,this.experiment=a,this.search.vms=a.vms.map((function(e){return e.name})),this.table.total=a.vm_count,this.updateTable(),e.next=16;break;case 13:e.prev=13,e.t0=e["catch"](0),this.$buefy.toast.open({message:"Getting the experiments failed.",type:"is-danger",duration:4e3});case 16:return e.prev=16,this.isWaiting=!1,e.finish(16);case 19:case"end":return e.stop()}}),e,this,[[0,13,16,19]])})));function t(){return e.apply(this,arguments)}return t}(),updateDisks:function(){var e=this;this.disks=[],this.$http.get("disks").then((function(t){t.json().then((function(t){if(0==t.disks.length)e.isWaiting=!0;else{for(var a=0;a<t.disks.length;a++)e.disks.push(t.disks[a]);e.isWaiting=!1}}))}),(function(t){console.log("Getting the disks failed with "+t.status),e.isWaiting=!1,e.$toast.open({message:"Getting the disks failed.",type:"is-danger",duration:4e3})}))},updateFiles:function(){var e=this;this.files=[],this.$http.get("experiments/"+this.$route.params.id+"/files").then((function(t){t.json().then((function(t){for(var a=0;a<t.files.length;a++)e.files.push(t.files[a]);e.isWaiting=!1}))}),(function(){e.$buefy.toast.open({message:"Getting the files failed.",type:"is-danger",duration:4e3}),e.isWaiting=!1}))},getInfo:function(e){var t=this;e.redeploying||(this.$http.get("experiments/"+this.$route.params.id+"/vms/"+e.name+"/snapshots").then((function(e){return e.json().then((function(e){e.snapshots.length>0&&(t.expModal.snapshots=e.snapshots)}))}),(function(e){t.$buefy.toast.open({message:"Getting info for the "+name+" VM failed with "+e.status+" status.",type:"is-danger",duration:4e3}),t.isWaiting=!1})),this.expModal.vm=e,this.expModal.active=!0)},snapshots:function(e){var t=this;this.$http.get("experiments/"+this.$route.params.id+"/vms/"+e.name+"/snapshots").then((function(e){return e.json().then((function(e){if(e.snapshots.length>0)return!0}))}),(function(e){t.$buefy.toast.open({message:"Retrieving the snapshots for the "+name+" VM failed with "+e.status+" status.",type:"is-danger",duration:4e3}),t.isWaiting=!1}))},captureSnapshot:function(e){var t=this,a=new Date,s=a.getFullYear()+"-"+("0"+(a.getMonth()+1)).slice(-2)+"-"+("0"+a.getDate()).slice(-2)+"_"+("0"+a.getHours()).slice(-2)+("0"+a.getMinutes()).slice(-2);this.$buefy.dialog.confirm({title:"Create a VM Snapshot",message:"This will create a snapshot for the "+e+" VM.",cancelText:"Cancel",confirmText:"Create",type:"is-success",hasIcon:!0,onConfirm:function(){t.expModal.active=!1,t.resetExpModal(),t.$http.post("experiments/"+t.$route.params.id+"/vms/"+e+"/snapshots",{filename:s},{timeout:0}).then((function(t){204==t.status&&console.log("create snapshot for vm "+e)}),(function(a){t.$buefy.toast.open({message:"Creating the snapshot for the "+e+" VM failed with "+a.status+" status.",type:"is-danger",duration:4e3})}))}})},restoreSnapshot:function(e,t){var a=this;this.$buefy.dialog.confirm({title:"Restore a VM Snapshot",message:"This will revert the "+e+" VM to "+t+".",cancelText:"Cancel",confirmText:"Revert",type:"is-success",hasIcon:!0,onConfirm:function(){a.expModal.active=!1,a.resetExpModal(),a.$http.post("experiments/"+a.$route.params.id+"/vms/"+e+"/snapshots/"+t,{},{timeout:0}).then((function(t){204==t.status&&console.log("restore snapshot for vm "+e)}),(function(s){a.$buefy.toast.open({message:"Restoring the "+t+" snapshot for the "+e+" VM failed with "+s.status+" status.",type:"is-danger",duration:4e3})}))}})},diskImage:function(e,t){var a=new Date,s=a.getFullYear()+""+("0"+a.getMonth()+1).slice(-2)+a.getDate(),n=("0"+a.getHours()).slice(-2)+""+("0"+a.getMinutes()).slice(-2)+("0"+a.getSeconds()).slice(-2);/(.*)_\d{14}/.test(t)?this.diskImageModal.name=t.substring(0,t.indexOf("_"))+"_"+s+n:this.diskImageModal.name=t.substring(0,t.indexOf("."))+"_"+s+n,this.diskImageModal.vm=e,this.expModal.active=!1,this.diskImageModal.active=!0},backingImage:function(e,t){var a=this;this.$buefy.dialog.confirm({title:"Create a Disk Image",message:"This will create a backing image for the "+e+" VM.",cancelText:"Cancel",confirmText:"Create",type:"is-success",hasIcon:!0,onConfirm:function(){a.diskImageModal.active=!1,a.resetDiskImageModal(),a.$http.post("experiments/"+a.$route.params.id+"/vms/"+e+"/commit",{filename:t+".qc2"},{timeout:0}).then((function(t){console.log("backing image for vm "+e+" failed with "+t.status)}),(function(t){a.$buefy.toast.open({message:"Creating the backing image for the "+e+" VM failed with "+t.status+" status.",type:"is-danger",duration:4e3})}))}})},killVm:function(e){var t=this;this.$buefy.dialog.confirm({title:"Kill the VM",message:"This will kill the "+e+" VM. You will not be able to restore this VM until you restart the "+this.$route.params.id+" experiment!",cancelText:"Cancel",confirmText:"KILL IT!",type:"is-danger",hasIcon:!0,onConfirm:function(){t.isWaiting=!0,t.$http.delete("experiments/"+t.$route.params.id+"/vms/"+e).then((function(a){if(204==a.status){for(var s=t.experiment.vms,n=0;n<s.length;n++)if(s[n].name==e){s.splice(n,1);break}t.experiment.vms=Object(i["a"])(s),t.isWaiting=!1}}),(function(a){t.$buefy.toast.open({message:"Killing the "+e+" VM failed with "+a.status+" status.",type:"is-danger",duration:4e3}),t.isWaiting=!1}))}}),this.expModal.active=!1,this.resetExpModal()},stop:function(){var e=this;this.$buefy.dialog.confirm({title:"Stop the Experiment",message:"This will stop the "+this.$route.params.id+" experiment.",cancelText:"Cancel",confirmText:"Stop",type:"is-danger",hasIcon:!0,onConfirm:function(){e.isWaiting=!0,e.$http.post("experiments/"+e.$route.params.id+"/stop").then((function(){e.$router.replace("/experiments/")}),(function(t){e.$buefy.toast.open({message:"Stopping experiment "+e.$route.params.id+" failed with "+t.status+" status.",type:"is-danger",duration:4e3}),e.isWaiting=!1}))}})},decorator:function(e,t){return t?"is-warning":e?"is-success":"is-danger"},tapDecorator:function(e,t){if(e)for(var a=0;a<e.length;a++)if(e[a].interface===t)return"is-success"},handlePcap:function(e,t){var a=this,s=new Date,n=s.getFullYear()+"-"+("0"+(s.getMonth()+1)).slice(-2)+"-"+("0"+s.getDate()).slice(-2)+"_"+("0"+s.getHours()).slice(-2)+("0"+s.getMinutes()).slice(-2);this.$http.get("experiments/"+this.$route.params.id+"/vms/"+e.name+"/captures").then((function(s){return s.json().then((function(s){var r=s.captures,o=!1;if(r)for(var l=0;l<r.length;l++)if(r[l].interface===t){o=!0;break}o?a.$buefy.dialog.confirm({title:"Stop All Packet Captures",message:"This will stop all packet captures for the "+e.name+" VM.",cancelText:"Cancel",confirmText:"Stop",type:"is-warning",hasIcon:!0,onConfirm:function(){a.isWaiting=!0,a.$http.delete("experiments/"+a.$route.params.id+"/vms/"+e.name+"/captures").then((function(e){if(204==e.status){for(var t=a.experiment.vms,s=0;s<t.length;s++)if(t[s].name==e.body.name){t[s]=e.body;break}a.experiment.vms=Object(i["a"])(t),a.isWaiting=!1}}),(function(t){a.$buefy.toast.open({message:"Stopping all packet captures for the "+e.name+" VM failed with "+t.status+" status.",type:"is-danger",duration:4e3}),a.isWaiting=!1}))}}):"disconnected"==e.networks[t]?a.$buefy.toast.open({message:"Cannot capture traffic on a disconnected interface.",type:"is-danger",duration:4e3}):a.$buefy.dialog.confirm({title:"Start a Packet Capture",message:"This will start a packet capture for the "+e.name+" VM, interface "+t+".",cancelText:"Cancel",confirmText:"Start",type:"is-success",hasIcon:!0,onConfirm:function(){a.isWaiting=!0,a.$http.post("experiments/"+a.$route.params.id+"/vms/"+e.name+"/captures",{interface:t,filename:n}).then((function(e){if(204==e.status){for(var t=a.experiment.vms,s=0;s<t.length;s++)if(t[s].name==e.body.name){t[s]=e.body;break}a.experiment.vms=Object(i["a"])(t),a.isWaiting=!1}}),(function(t){a.$buefy.toast.open({message:"Starting packet capture for the "+e.name+" VM failed with "+t.status+" status.",type:"is-danger",duration:4e3}),a.isWaiting=!1}))}})}))}))},startVm:function(e){var t=this;this.$buefy.dialog.confirm({title:"Start the VM",message:"This will start the "+e+" VM.",cancelText:"Cancel",confirmText:"Start",type:"is-success",hasIcon:!0,onConfirm:function(){t.isWaiting=!0,t.$http.post("experiments/"+t.$route.params.id+"/vms/"+e+"/start").then((function(e){for(var a=t.experiment.vms,s=0;s<a.length;s++)if(a[s].name==e.body.name){a[s]=e.body;break}t.experiment.vms=Object(i["a"])(a),t.isWaiting=!1}),(function(a){t.$buefy.toast.open({message:"Starting the "+e+" VM failed with "+a.status+" status.",type:"is-danger",duration:4e3}),t.isWaiting=!1}))}}),this.expModal.active=!1,this.resetExpModal()},pauseVm:function(e){var t=this;this.$buefy.dialog.confirm({title:"Pause the VM",message:"This will pause the "+e+" VM.",cancelText:"Cancel",confirmText:"Pause",type:"is-warning",hasIcon:!0,onConfirm:function(){t.isWaiting=!0,t.$http.post("experiments/"+t.$route.params.id+"/vms/"+e+"/stop").then((function(e){for(var a=t.experiment.vms,s=0;s<a.length;s++)if(a[s].name==e.body.name){a[s]=e.body;break}t.experiment.vms=Object(i["a"])(a),t.isWaiting=!1}),(function(a){t.$buefy.toast.open({message:"Pausing the "+e+" VM failed with "+a.status+" status.",type:"is-danger",duration:4e3}),t.isWaiting=!1}))}}),this.expModal.active=!1,this.resetExpModal()},redeploy:function(e){this.updateDisks(),this.redeployModal.name=e.name,this.redeployModal.cpus=e.cpus,this.redeployModal.ram=e.ram,this.redeployModal.disk=e.disk,this.redeployModal.inject=!1,this.redeployModal.active=!0,this.expModal.active=!1},redeployVm:function(e,t,a,s,n){var i=this,r={cpus:parseInt(t),ram:parseInt(a),disk:s},o="experiments/"+this.$route.params.id+"/vms/"+e+"/redeploy";n&&(o+="?replicate-injects=true"),this.$http.post(o,r).then(null,(function(t){i.$buefy.toast.open({message:"Redeploying the "+e+" VM failed with "+t.status+" status.",type:"is-danger",duration:4e3})})),this.redeployModal.active=!1,this.resetRedeployModal()},changeVlan:function(e,t,a,s){var n=this;"0"===t?this.$buefy.dialog.confirm({title:"Disconnect a VM Network Interface",message:"This will disconnect the "+e+" interface for the "+s+" VM.",cancelText:"Cancel",confirmText:"Disconnect",type:"is-warning",hasIcon:!0,onConfirm:function(){n.isWaiting=!0;var t={interface:{index:e,vlan:0}};n.$http.patch("experiments/"+n.$route.params.id+"/vms/"+s,t).then((function(e){for(var t=n.experiment.vms,a=0;a<t.length;a++)if(t[a].name==e.body.name){t[a]=e.body;break}n.experiment.vms=Object(i["a"])(t),n.isWaiting=!1}),(function(e){n.$buefy.toast.open({message:"Disconnecting the network for the "+s+" VM failed with "+e.status+" status.",type:"is-danger",duration:4e3}),n.isWaiting=!1}))}}):this.$buefy.dialog.confirm({title:"Change the VLAN",message:"This will change the VLAN from "+a.toLowerCase()+" to "+t.alias.toLowerCase()+" ("+t.vlan+") for the "+s+" VM.",cancelText:"Cancel",confirmText:"Change",type:"is-warning",hasIcon:!0,onConfirm:function(){n.isWaiting=!0;var a={interface:{index:e,vlan:t.vlan}};n.$http.patch("experiments/"+n.$route.params.id+"/vms/"+s,a).then((function(e){for(var t=n.experiment.vms,a=0;a<t.length;a++)if(t[a].name==e.body.name){t[a]=e.body;break}n.experiment.vms=Object(i["a"])(t),n.isWaiting=!1}),(function(e){n.$buefy.toast.open({message:"Changing the VLAN for the "+s+" VM failed with "+e.status+" status.",type:"is-danger",duration:4e3}),n.isWaiting=!1}))}}),this.vlanModal.active=!1},resetExpModal:function(){this.expModal={active:!1,vm:[],snapshots:!1}},resetRedeployModal:function(){this.redeployModal={active:!1,name:null,cpus:null,ram:null,disk:null,inject:!1}},resetDiskImageModal:function(){this.diskImageModal={active:!1,vm:null,name:null,dateTime:null,nameErrType:null,nameErrMsg:null}}},data:function(){return{search:{vms:[],filter:""},table:{isPaginated:!0,isPaginationSimple:!0,currentPage:1,perPage:10,total:0,sortColumn:"name",sortOrder:"asc",paginationSize:"is-small"},expModal:{active:!1,vm:[],snapshots:!1},vlanModal:{active:!1,vmName:null,vmFromNet:null,vmNetIndex:null,vmNet:[]},redeployModal:{active:!1,name:null,cpus:null,ram:null,disk:null,inject:!1},diskImageModal:{active:!1,vm:null,name:null,dateTime:null,nameErrType:null,nameErrMsg:null},experiment:[],files:[],disks:[],vlan:null,expName:null,isWaiting:!0}}},l=o,c=(a("33ae"),a("2877")),p=Object(c["a"])(l,s,n,!1,null,"7cd21708",null);t["default"]=p.exports},"33ae":function(e,t,a){"use strict";var s=a("f3a5"),n=a.n(s);n.a},"386d":function(e,t,a){"use strict";var s=a("cb7c"),n=a("83a1"),i=a("5f1b");a("214f")("search",1,(function(e,t,a,r){return[function(a){var s=e(this),n=void 0==a?void 0:a[t];return void 0!==n?n.call(a,s):new RegExp(a)[t](String(s))},function(e){var t=r(a,e,this);if(t.done)return t.value;var o=s(e),l=String(this),c=o.lastIndex;n(c,0)||(o.lastIndex=0);var p=i(o,l);return n(o.lastIndex,c)||(o.lastIndex=c),null===p?-1:p.index}]}))},"83a1":function(e,t){e.exports=Object.is||function(e,t){return e===t?0!==e||1/e===1/t:e!=e&&t!=t}},f3a5:function(e,t,a){},f898:function(e,t,a){e.exports=a.p+"assets/img/redeploying.9ae0addb.png"}}]);
//# sourceMappingURL=chunk-9184ba1e.9c00be34.js.map