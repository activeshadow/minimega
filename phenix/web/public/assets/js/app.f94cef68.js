(function(e){function t(t){for(var a,r,o=t[0],l=t[1],c=t[2],p=0,d=[];p<o.length;p++)r=o[p],n[r]&&d.push(n[r][0]),n[r]=0;for(a in l)Object.prototype.hasOwnProperty.call(l,a)&&(e[a]=l[a]);u&&u(t);while(d.length)d.shift()();return i.push.apply(i,c||[]),s()}function s(){for(var e,t=0;t<i.length;t++){for(var s=i[t],a=!0,o=1;o<s.length;o++){var l=s[o];0!==n[l]&&(a=!1)}a&&(i.splice(t--,1),e=r(r.s=s[0]))}return e}var a={},n={app:0},i=[];function r(t){if(a[t])return a[t].exports;var s=a[t]={i:t,l:!1,exports:{}};return e[t].call(s.exports,s,s.exports,r),s.l=!0,s.exports}r.m=e,r.c=a,r.d=function(e,t,s){r.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:s})},r.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},r.t=function(e,t){if(1&t&&(e=r(e)),8&t)return e;if(4&t&&"object"===typeof e&&e&&e.__esModule)return e;var s=Object.create(null);if(r.r(s),Object.defineProperty(s,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var a in e)r.d(s,a,function(t){return e[t]}.bind(null,a));return s},r.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return r.d(t,"a",t),t},r.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},r.p="/";var o=window["webpackJsonp"]=window["webpackJsonp"]||[],l=o.push.bind(o);o.push=t,o=o.slice();for(var c=0;c<o.length;c++)t(o[c]);var u=l;i.push([0,"chunk-vendors"]),s()})({0:function(e,t,s){e.exports=s("56d7")},"0350":function(e,t,s){"use strict";var a=s("03ff"),n=s.n(a);n.a},"03ff":function(e,t,s){},"06b2":function(e,t,s){},"0ed8":function(e,t,s){e.exports=s.p+"assets/img/not-available.54b0734a.png"},1:function(e,t){},1801:function(e,t,s){e.exports=s.p+"assets/img/not-running.9f1471e7.png"},"2fa6":function(e,t,s){},3089:function(e,t,s){"use strict";var a=s("b4d0"),n=s.n(a);n.a},"3da6":function(e,t,s){e.exports=s.p+"assets/img/phenix-banner.da47445d.png"},"56d7":function(e,t,s){"use strict";s.r(t);s("a481"),s("cadf"),s("551c"),s("f751"),s("097d");var a=s("2b0e"),n=s("28dd"),i=s("289d"),r=(s("2ef0"),s("1f54"),function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{staticClass:"container"},[s("app-header"),s("div",{staticClass:"row"},[s("div",{staticClass:"col-xs-12"},[s("router-view")],1),s("app-footer")],1)],1)}),o=[],l=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",[e._m(0),s("nav",{staticClass:"navbar is-light",attrs:{role:"navigation","aria-label":"main navigation"}},[s("div",{staticClass:"navbar-menu",attrs:{id:"navbarBasicExample"}},[s("div",{staticClass:"navbar-start"},[e.auth&&e.experimentUser()?s("router-link",{staticClass:"navbar-item",attrs:{to:"/"}},[e._v("Experiments")]):e._e(),e.auth&&e.experimentUser()?s("router-link",{staticClass:"navbar-item",attrs:{to:"/hosts"}},[e._v("Hosts")]):e._e(),e.auth&&e.globalAdmin()?s("router-link",{staticClass:"navbar-item",attrs:{to:"/users"}},[e._v("Users")]):e._e(),e.auth&&e.globalAdmin()?s("router-link",{staticClass:"navbar-item",attrs:{to:"/log"}},[e._v("Log")]):e._e()],1)]),s("div",{staticClass:"navbar-end"},[e.auth?s("div",{staticClass:"navbar-item"},[s("a",{staticClass:"button navbar-item is-light",attrs:{role:"button"},on:{click:e.logout}},[e._v("Logout")])]):e._e()])])])},c=[function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("a",{attrs:{href:"experiments"}},[a("img",{attrs:{src:s("3da6"),width:"240"}})])}],u=(s("6762"),s("2fdb"),{computed:{auth:function(){return this.$store.getters.auth}},methods:{logout:function(){var e=this;this.$http.get("logout").then((function(t){204==t.status&&e.$store.commit("LOGOUT")}))},globalAdmin:function(){return["Global Admin"].includes(this.$store.getters.role)},adminUser:function(){return["Global Admin","Experiment Admin"].includes(this.$store.getters.role)},experimentUser:function(){return["Global Admin","Experiment Admin","Experiment User","Experiment Viewer"].includes(this.$store.getters.role)}}}),p=u,d=s("2877"),m=Object(d["a"])(p,l,c,!1,null,null,null),h=m.exports,f=function(){var e=this,t=e.$createElement;e._self._c;return e._m(0)},g=[function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",[s("hr"),s("small",[e._v("Copyright © "),s("b",[e._v("2019 Sandia National Laboratories")]),e._v(". All Rights Reserved.")])])}],b={},v=Object(d["a"])(b,f,g,!1,null,null,null),y=v.exports,x={components:{appHeader:h,appFooter:y},created:function(){var e=localStorage.getItem("user"),t=localStorage.getItem("token"),s=localStorage.getItem("role"),a=localStorage.getItem("auth");if(t&&a){var n={username:e,token:t,role:s};this.$store.commit("LOGIN",{user:n,remember:!0})}}},w=x,k=(s("5c0b"),Object(d["a"])(w,r,o,!1,null,null,null)),M=k.exports,C=s("8c4f"),$=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{staticClass:"content"},[s("b-modal",{attrs:{active:e.createModal.active,"on-cancel":e.resetCreateModal,"has-modal-card":""},on:{"update:active":function(t){return e.$set(e.createModal,"active",t)}}},[s("div",{staticClass:"modal-card",staticStyle:{width:"auto"}},[s("header",{staticClass:"modal-card-head"},[s("p",{staticClass:"modal-card-title"},[e._v("Create a New Experiment")])]),s("section",{staticClass:"modal-card-body"},[s("b-field",{attrs:{label:"Experiment Name",type:e.createModal.nameErrType,message:e.createModal.nameErrMsg,autofocus:""}},[s("b-input",{directives:[{name:"focus",rawName:"v-focus"}],attrs:{type:"text"},model:{value:e.createModal.name,callback:function(t){e.$set(e.createModal,"name",t)},expression:"createModal.name"}})],1),s("b-field",{attrs:{label:"Experiment Topology"}},[s("b-select",{attrs:{placeholder:"Select a topology",expanded:""},model:{value:e.createModal.topology,callback:function(t){e.$set(e.createModal,"topology",t)},expression:"createModal.topology"}},e._l(e.topologies,(function(t,a){return s("option",{key:a,domProps:{value:t}},[e._v("\n              "+e._s(t)+"\n            ")])})),0)],1),s("b-tooltip",{attrs:{label:"this list is scrollable and supports multiple selections, \n                          you can select or unselect applications before submitting \n                          the form",type:"is-light is-right",multilined:""}},[s("b-field",{attrs:{label:"Applications"}}),s("b-icon",{staticStyle:{color:"#383838"},attrs:{icon:"question-circle"}})],1),s("b-select",{attrs:{expanded:""},on:{input:function(t){return e.addApp(t)}}},e._l(e.applications,(function(t,a){return s("option",{key:a,domProps:{value:t}},[e._v("\n            "+e._s(t)+"\n          ")])})),0),e._l(e.createModal.apps,(function(t,a){return s("b-tag",{key:a,attrs:{type:"is-light",closable:""},on:{close:function(t){return e.createModal.apps.splice(a,1)}}},[e._v("\n          "+e._s(t)+"\n        ")])})),s("br"),s("br"),s("b-field",{attrs:{label:"VLAN Range"}},[s("b-field",[s("b-input",{attrs:{type:"number",min:"1",max:"4094",placeholder:"minimum",expanded:""},model:{value:e.createModal.vlan_min,callback:function(t){e.$set(e.createModal,"vlan_min",t)},expression:"createModal.vlan_min"}}),s("b-input",{attrs:{type:"number",min:"1",max:"4094",placeholder:"maximum",expanded:""},model:{value:e.createModal.vlan_max,callback:function(t){e.$set(e.createModal,"vlan_max",t)},expression:"createModal.vlan_max"}})],1)],1)],2),s("footer",{staticClass:"modal-card-foot buttons is-right"},[s("button",{staticClass:"button is-light",attrs:{disabled:!e.validate},on:{click:e.create}},[e._v("Create Experiment")])])])]),0==e.experiments.length?[s("section",{staticClass:"hero is-light is-bold is-large"},[s("div",{staticClass:"hero-body"},[s("div",{staticClass:"container",staticStyle:{"text-align":"center"}},[s("h1",{staticClass:"title"},[e._v("\n            There are no experiments!\n          ")]),e.adminUser()?s("b-button",{attrs:{type:"is-success",outlined:""},on:{click:function(t){e.updateTopologies(),e.updateApplications(),e.createModal.active=!0}}},[e._v("Create One Now!")]):e._e()],1)])])]:[s("hr"),s("b-field",{attrs:{position:"is-right"}},[s("b-autocomplete",{attrs:{placeholder:"Find an Experiment",icon:"search",data:e.filteredData},on:{select:function(t){return e.filtered=t}},model:{value:e.searchName,callback:function(t){e.searchName=t},expression:"searchName"}},[s("template",{slot:"empty"},[e._v("\n          No results found\n        ")])],2),s("p",{staticClass:"control"},[s("button",{staticClass:"button",staticStyle:{color:"#686868"},on:{click:function(t){e.searchName=""}}},[s("b-icon",{attrs:{icon:"window-close"}})],1)]),e._v("\n         \n      "),e.globalUser()?s("p",{staticClass:"control"},[s("b-tooltip",{attrs:{label:"create a new experiment",type:"is-light is-left",multilined:""}},[s("button",{staticClass:"button is-light",on:{click:function(t){e.updateTopologies(),e.updateApplications(),e.createModal.active=!0}}},[s("b-icon",{attrs:{icon:"plus"}})],1)])],1):e._e()],1),s("div",[s("b-table",{attrs:{data:e.filteredExperiments,paginated:e.table.isPaginated&&e.paginationNeeded,"per-page":e.table.perPage,"current-page":e.table.currentPage,"pagination-simple":e.table.isPaginationSimple,"pagination-size":e.table.paginationSize,"default-sort-direction":e.table.defaultSortDirection,"default-sort":"name"},on:{"update:currentPage":function(t){return e.$set(e.table,"currentPage",t)},"update:current-page":function(t){return e.$set(e.table,"currentPage",t)}},scopedSlots:e._u([{key:"default",fn:function(t){return[s("b-table-column",{attrs:{field:"name",label:"Name",width:"200",sortable:""}},[e.updating(t.row.status)?[e._v("\n              "+e._s(t.row.name)+"\n            ")]:[s("router-link",{staticClass:"navbar-item",attrs:{to:{name:"experiment",params:{id:t.row.name}}}},[e._v("\n                "+e._s(t.row.name)+"\n              ")])]],2),s("b-table-column",{attrs:{field:"status",label:"Status",width:"100",sortable:"",centered:""}},["starting"==t.row.status?[s("section",[s("b-progress",{attrs:{size:"is-medium",type:"is-warning","show-value":"",value:t.row.percent,format:"percent"}})],1)]:e.adminUser()?[s("span",{staticClass:"tag is-medium",class:e.decorator(t.row.status)},[s("div",{staticClass:"field"},[s("div",{staticClass:"field",on:{click:function(s){t.row.running?e.stop(t.row.name,t.row.status):e.start(t.row.name,t.row.status)}}},[e._v("\n                    "+e._s(t.row.status)+"\n                  ")])])])]:[s("span",{staticClass:"tag is-medium",class:e.decorator(t.row.status)},[e._v("\n                "+e._s(t.row.status)+"\n              ")])]],2),s("b-table-column",{attrs:{field:"topology",label:"Topology",width:"200"}},[e._v("\n            "+e._s(e._f("lowercase")(t.row.topology))+"\n          ")]),s("b-table-column",{attrs:{field:"apps",label:"Applications",width:"200"}},[e._v("\n            "+e._s(e._f("lowercase")(e._f("stringify")(t.row.apps)))+"\n          ")]),s("b-table-column",{attrs:{field:"start_time",label:"Start Time",width:"250",sortable:""}},[e._v("\n            "+e._s(t.row.start_time)+"\n          ")]),s("b-table-column",{attrs:{field:"vm_count",label:"# of VMs",width:"100",centered:"",sortable:""}},[e._v("\n            "+e._s(t.row.vm_count)+"\n          ")]),s("b-table-column",{attrs:{field:"vlan_range",label:"VLAN Range",width:"100",centered:""}},[e._v("\n            "+e._s(t.row.vlan_min)+" - "+e._s(t.row.vlan_max)+"\n          ")]),s("b-table-column",{attrs:{field:"vlan_count",label:"Total VLANs",width:"100",centered:""}},[e._v("\n            "+e._s(t.row.vlan_count)+"\n          ")]),e.globalUser()?s("b-table-column",{attrs:{label:"Delete",width:"50",centered:""}},[s("button",{staticClass:"button is-light is-small",attrs:{disabled:e.updating(t.row.status)},on:{click:function(s){return e.del(t.row.name,t.row.running)}}},[s("b-icon",{attrs:{icon:"trash"}})],1)]):e._e()]}}])},[s("template",{slot:"empty"},[s("section",{staticClass:"section"},[s("div",{staticClass:"content has-text-white has-text-centered"},[e._v("\n              Your search turned up empty!\n            ")])])])],2),s("br"),e.paginationNeeded?s("b-field",{attrs:{grouped:"",position:"is-right"}},[s("div",{staticClass:"control is-flex"},[s("b-switch",{attrs:{size:"is-small",type:"is-light"},model:{value:e.table.isPaginated,callback:function(t){e.$set(e.table,"isPaginated",t)},expression:"table.isPaginated"}},[e._v("Pagenate")])],1)]):e._e()],1)],s("b-loading",{attrs:{"is-full-page":!0,active:e.isWaiting,"can-cancel":!1},on:{"update:active":function(t){e.isWaiting=t}}})],2)},S=[],P=(s("4f7f"),s("5df3"),s("1c4c"),s("75fc")),T=(s("28a5"),s("ac6a"),s("6b54"),s("7f7f"),s("4917"),s("3b2b"),s("96cf"),s("3b8d")),E={beforeDestroy:function(){clearInterval(this.update),this.ws.close()},created:function(){var e=Object(T["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,this.wsConnect();case 3:this.ws=e.sent,e.next=10;break;case 6:return e.prev=6,e.t0=e["catch"](0),console.log("unable to connect to WebSocket: "+e.t0),e.abrupt("return");case 10:this.ws.onmessage=this.handler,this.updateExperiments();case 12:case"end":return e.stop()}}),e,this,[[0,6]])})));function t(){return e.apply(this,arguments)}return t}(),computed:{filteredExperiments:function(){var e=this.experiments,t=new RegExp(this.searchName,"i"),s=[];for(var a in e){var n=e[a];n.name.match(t)&&(n.start_time=""==n.start_time?"N/A":n.start_time,s.push(n))}return s},filteredData:function(){var e=this,t=this.experiments.map((function(e){return e.name}));return t.filter((function(t){return t.toString().toLowerCase().indexOf(e.searchName.toLowerCase())>=0}))},paginationNeeded:function(){var e=this.experiments;return!(e.length<=10)},validate:function(){if(!this.createModal.name)return!1;for(var e=0;e<this.experiments.length;e++)if(this.experiments[e].name==this.createModal.name)return this.createModal.nameErrType="is-danger",this.createModal.nameErrMsg="experiment with this name already exists",!1;return/\s/.test(this.createModal.name)?(this.createModal.nameErrType="is-danger",this.createModal.nameErrMsg="experiment names cannot have a space",!1):(/[A-Z]/.test(this.createModal.name)?(this.createModal.nameErrType="is-danger",this.createModal.nameErrMsg="experiment names cannot have an upper case letter"):"create"==this.createModal.name?(this.createModal.nameErrType="is-danger",this.createModal.nameErrMsg="experiment names cannot be create!"):(this.createModal.nameErrType=null,this.createModal.nameErrMsg=null),!!this.createModal.topology&&(!(this.createModal.vlan_max<this.createModal.vlan_min)&&(!(this.createModal.vlan_min<0)&&(!(this.createModal.vlan_min>4094)&&(!(this.createModal.vlan_max<0)&&!(this.createModal.vlan_max>4094))))))}},methods:{handler:function(e){var t=this;e.data.split(/\r?\n/).forEach((function(e){var s=JSON.parse(e);t.handle(s)}))},handle:function(e){if("experiment"==e.resource.type){var t=this.experiments;switch(e.resource.action){case"create":e.result.status="stopped",t.push(e.result),this.experiments=Object(P["a"])(t),this.$buefy.toast.open({message:"The "+e.resource.name+" experiment has been created.",type:"is-success",duration:4e3});break;case"delete":for(var s=0;s<t.length;s++)if(t[s].name==e.resource.name){t.splice(s,1);break}this.experiments=Object(P["a"])(t),this.$buefy.toast.open({message:"The "+e.resource.name+" experiment has been deleted.",type:"is-success",duration:4e3});break;case"start":for(var a=0;a<t.length;a++)if(t[a].name==e.resource.name){t[a]=e.result;break}this.experiments=Object(P["a"])(t),this.$buefy.toast.open({message:"The "+e.resource.name+" experiment has been started.",type:"is-success",duration:4e3});break;case"stop":for(var n=0;n<t.length;n++)if(t[n].name==e.resource.name){t[n]=e.result,t[n].status="stopped";break}this.experiments=Object(P["a"])(t),this.$buefy.toast.open({message:"The "+e.resource.name+" experiment has been stopped.",type:"is-success",duration:4e3});break;case"starting":case"stopping":for(var i=0;i<t.length;i++)if(t[i].name==e.resource.name){t[i].status=e.resource.action,t[i].percent=0;break}this.experiments=Object(P["a"])(t),this.$buefy.toast.open({message:"The "+e.resource.name+" experiment is being updated.",type:"is-warning"});break;case"progress":for(var r=(100*e.result.percent).toFixed(0),o=0;o<t.length;o++)if(t[o].name==e.resource.name){t[o].percent=parseInt(r);break}this.experiments=Object(P["a"])(t);break}}},updateExperiments:function(){var e=this;this.$http.get("experiments").then((function(t){t.json().then((function(t){e.experiments=t.experiments,e.isWaiting=!1}))}),(function(t){e.isWaiting=!1,e.$buefy.toast.open({message:"Getting the experiments failed.",type:"is-danger",duration:4e3})}))},updateTopologies:function(){var e=this;this.$http.get("topologies").then((function(t){t.json().then((function(t){e.topologies=t.topologies,e.isWaiting=!1}))}),(function(t){e.isWaiting=!1,e.$buefy.toast.open({message:"Getting the topologies failed.",type:"is-danger",duration:4e3})}))},updateApplications:function(){var e=this;this.$http.get("applications").then((function(t){t.json().then((function(t){e.applications=t.applications,e.isWaiting=!1}))}),(function(t){e.isWaiting=!1,e.$buefy.toast.open({message:"Getting the applications failed.",type:"is-danger",duration:4e3})}))},globalUser:function(){return["Global Admin"].includes(this.$store.getters.role)},adminUser:function(){return["Global Admin","Experiment Admin"].includes(this.$store.getters.role)},experimentUser:function(){return["Global Admin","Experiment Admin","Experiment User"].includes(this.$store.getters.role)},update:function(e){this.isMenuActive=!0},updating:function(e){return"starting"===e||"stopping"===e},decorator:function(e){switch(e){case"started":return"is-success";case"starting":case"stopping":return"is-warning";case"stopped":return"is-danger"}},start:function(e,t){var s=this;"starting"!=t&&"stopping"!=t?this.$buefy.dialog.confirm({title:"Start the Experiment",message:"This will start the "+e+" experiment.",cancelText:"Cancel",confirmText:"Start",type:"is-success",hasIcon:!0,onConfirm:function(){s.$http.post("experiments/"+e+"/start").then((function(e){console.log("experiment started")}),(function(t){s.$buefy.toast.open({message:"Starting the "+e+" experiment failed with "+t.status+" status.",type:"is-danger",duration:4e3}),s.isWaiting=!1}))}}):this.$buefy.toast.open({message:"The "+e+" experiment is currently "+t+". You cannot make any changes at this time.",type:"is-warning"})},stop:function(e,t){var s=this;"starting"!=t&&"stopping"!=t?this.$buefy.dialog.confirm({title:"Stop the Experiment",message:"This will stop the "+e+" experiment.",cancelText:"Cancel",confirmText:"Stop",type:"is-danger",hasIcon:!0,onConfirm:function(){s.$http.post("experiments/"+e+"/stop").then((function(e){console.log("experiment stopped")}),(function(t){s.$buefy.toast.open({message:"Stopping the "+e+" experiment failed with "+t.status+" status.",type:"is-danger",duration:4e3}),s.isWaiting=!1}))}}):this.$buefy.toast.open({message:"The "+e+" experiment is currently "+t+". You cannot make any changes at this time.",type:"is-warning"})},del:function(e,t){var s=this;t?this.$buefy.toast.open({message:"The "+e+" experiment is running; you must stop it before deleting it.",type:"is-warning",duration:4e3}):this.$buefy.dialog.confirm({title:"Delete the Experiment",message:"This will DELETE the "+e+" experiment. Are you sure you want to do this?",cancelText:"Cancel",confirmText:"Delete",type:"is-danger",hasIcon:!0,onConfirm:function(){s.isWaiting=!0,s.$http.delete("experiments/"+e).then((function(t){if(204==t.status){for(var a=s.experiments,n=0;n<a.length;n++)if(a[n].name==e){a.splice(n,1);break}s.experiments=Object(P["a"])(a)}s.isWaiting=!1}),(function(t){s.$buefy.toast.open({message:"Deleting the "+e+" experiment failed with "+t.status+" status.",type:"is-danger",duration:4e3}),s.isWaiting=!1}))}})},create:function(){var e=this,t={name:this.createModal.name,topology:this.createModal.topology,apps:this.createModal.apps,vlan_min:+this.createModal.vlan_min,vlan_max:+this.createModal.vlan_max},s=Array.from(new Set(t.apps));return t.apps=s,this.createModal.name?this.createModal.topology?(this.isWaiting=!0,this.$http.post("experiments",t,{timeout:0}).then((function(t){e.isWaiting=!1}),(function(s){e.$buefy.toast.open({message:"Creating the "+t.name+" experiment failed with "+s.status+" status.",type:"is-danger",duration:4e3}),e.isWaiting=!1})),this.createModal.active=!1,void this.resetCreateModal()):(this.$buefy.toast.open({message:"You must select an experiment topology.",type:"is-warning",duration:4e3}),{}):(this.$buefy.toast.open({message:"You must include a name for the experiment.",type:"is-warning",duration:4e3}),{})},addApp:function(e){this.createModal.apps.push(e),this.createModal.apps=_.uniq(this.createModal.apps)},resetCreateModal:function(){this.createModal={active:!1,name:null,nameErrType:null,nameErrMsg:null,topology:null,apps:[],vlan_min:null,vlan_max:null}}},directives:{focus:{inserted:function(e){"INPUT"==e.tagName?e.focus():e.querySelector("input").focus()}}},data:function(){return{table:{isPaginated:!0,perPage:10,currentPage:1,isPaginationSimple:!0,paginationSize:"is-small",defaultSortDirection:"asc"},createModal:{active:!1,name:null,nameErrType:null,nameErrMsg:null,topology:null,apps:[],vlan_min:null,vlan_max:null},experiments:[],topologies:[],applications:[],searchName:"",filtered:null,isMenuActive:!1,action:null,rowName:null,isWaiting:!0,ws:null}}},W=E,N=(s("c50c"),Object(d["a"])(W,$,S,!1,null,"42e74baa",null)),V=N.exports,O=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s(e.component,{tag:"component"})},U=[],I=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"content"},[a("b-modal",{attrs:{active:e.expModal.active,"on-cancel":e.resetExpModal,"has-modal-card":""},on:{"update:active":function(t){return e.$set(e.expModal,"active",t)}}},[a("div",{staticClass:"modal-card",staticStyle:{width:"25em"}},[a("header",{staticClass:"modal-card-head"},[a("p",{staticClass:"modal-card-title"},[e._v(e._s(e.expModal.vm.name?e.expModal.vm.name:"unknown")+" VM")])]),a("section",{staticClass:"modal-card-body"},[a("p",[e._v("Host: "+e._s(e.expModal.vm.host))]),a("p",[e._v("IPv4: "+e._s(e._f("stringify")(e.expModal.vm.ipv4)))]),a("p",[e._v("CPU(s): "+e._s(e.expModal.vm.cpus))]),a("p",[e._v("Memory: "+e._s(e._f("ram")(e.expModal.vm.ram)))]),a("p",[e._v("Disk: "+e._s(e.expModal.vm.disk))]),a("p",[e._v("Uptime: "+e._s(e._f("uptime")(e.expModal.vm.uptime)))]),a("p",[e._v("Network(s): "+e._s(e._f("lowercase")(e._f("stringify")(e.expModal.vm.networks))))]),a("p",[e._v("Taps: "+e._s(e._f("lowercase")(e._f("stringify")(e.expModal.vm.taps))))]),e.expModal.snapshots?a("p",[e._v("\n          Snapshots:\n          "),a("br")]):e._e(),e._l(e.expModal.snapshots,(function(t,s){return a("p",{key:s},[a("b-tooltip",{attrs:{label:"restore this snapshot",type:"is-light is-right"}},[a("b-icon",{staticStyle:{color:"#686868"},attrs:{icon:"play-circle"},nativeOn:{click:function(s){return e.restoreSnapshot(e.expModal.vm.name,t)}}})],1),e._v("\n          "+e._s(t)+"\n        ")],1)})),a("p")],2),a("footer",{staticClass:"modal-card-foot buttons is-right"},[e.adminUser()?a("div",[e.expModal.vm.running?[a("b-tooltip",{attrs:{label:"pause a vm",type:"is-light"}},[a("b-button",{staticClass:"button is-danger",attrs:{"icon-left":"pause"},on:{click:function(t){return e.pauseVm(e.expModal.vm.name)}}})],1)]:[a("b-tooltip",{attrs:{label:"start a vm",type:"is-light"}},[a("b-button",{staticClass:"button is-success",attrs:{"icon-left":"play"},on:{click:function(t){return e.startVm(e.expModal.vm.name)}}})],1)]],2):e._e(),e.expModal.vm.running?a("div",[e._v("\n          \n        "),a("b-tooltip",{attrs:{label:"create a snapshot",type:"is-light"}},[a("b-button",{staticClass:"button is-light",attrs:{"icon-left":"camera"},on:{click:function(t){return e.captureSnapshot(e.expModal.vm.name)}}})],1)],1):e._e(),e.experimentUser()?a("div",[e._v("\n          \n        "),a("b-tooltip",{attrs:{label:"create a backing image",type:"is-light"}},[a("b-button",{staticClass:"button is-light",attrs:{"icon-left":"save"},on:{click:function(t){return e.diskImage(e.expModal.vm.name,e.expModal.vm.disk)}}})],1)],1):e._e(),e.experimentUser()?a("div",[e._v("\n          \n        "),a("b-tooltip",{attrs:{label:"redeploy a vm",type:"is-light"}},[a("b-button",{staticClass:"button is-warning",attrs:{"icon-left":"power-off"},on:{click:function(t){return e.redeploy(e.expModal.vm)}}})],1)],1):e._e(),e.experimentUser()?a("div",[e._v("\n         \n        "),a("b-tooltip",{attrs:{label:"kill a vm",type:"is-light"}},[a("b-button",{staticClass:"button is-danger",attrs:{"icon-left":"trash"},on:{click:function(t){return e.killVm(e.expModal.vm.name)}}})],1)],1):e._e()])])]),a("b-modal",{attrs:{active:e.vlanModal.active,"has-modal-card":""},on:{"update:active":function(t){return e.$set(e.vlanModal,"active",t)}}},[a("div",{staticClass:"modal-card",staticStyle:{width:"25em"}},[a("header",{staticClass:"modal-card-head"},[a("p",{staticClass:"modal-card-title"},[e._v("Change the VLAN")])]),a("section",{staticClass:"modal-card-body"},[a("font",{attrs:{color:"#202020"}},[e._v("\n        Move interface "+e._s(e.vlanModal.vmNetIndex)+" from "+e._s(e._f("lowercase")(e.vlanModal.vmFromNet))+" to a new one for the "+e._s(e.vlanModal.active?e.vlanModal.vmName:"unknown")+" VM.\n      ")]),a("br"),a("br"),a("b-field",[a("b-select",{attrs:{expanded:""},model:{value:e.vlan,callback:function(t){e.vlan=t},expression:"vlan"}},[a("option",{attrs:{value:"0"}},[e._v("disconnect")]),e._l(e.experiment.vlans,(function(t,s){return a("option",{key:s,domProps:{value:t}},[e._v("\n              "+e._s(e._f("lowercase")(t.alias))+" ("+e._s(t.vlan)+")\n            ")])}))],2)],1)],1),a("footer",{staticClass:"modal-card-foot buttons is-right"},[a("button",{staticClass:"button is-success",on:{click:function(t){return e.changeVlan(e.vlanModal.vmNetIndex,e.vlan,e.vlanModal.vmFromNet,e.vlanModal.vmName)}}},[e._v("\n          Change\n        ")])])])]),a("b-modal",{attrs:{active:e.redeployModal.active,"on-cancel":e.resetRedeployModal,"has-modal-card":""},on:{"update:active":function(t){return e.$set(e.redeployModal,"active",t)}}},[a("div",{staticClass:"modal-card",staticStyle:{width:"25em"}},[a("header",{staticClass:"modal-card-head"},[a("p",{staticClass:"modal-card-title"},[e._v("Redeploy the VM")])]),a("section",{staticClass:"modal-card-body"},[a("font",{attrs:{color:"#202020"}},[e._v("\n          Modify any of the following current settings and redeploy the "+e._s(e.redeployModal.name)+" VM.\n          "),a("p"),e._v("\n          CPUs: \n          "),a("b-tooltip",{attrs:{label:"menu for assigning cpus",type:"is-dark"}},[a("b-select",{attrs:{value:e.redeployModal.cpus,expanded:""},on:{input:function(t){return e.redeployModal.cpus=t}}},[a("option",{attrs:{value:"1"}},[e._v("1")]),a("option",{attrs:{value:"2"}},[e._v("2")]),a("option",{attrs:{value:"3"}},[e._v("3")]),a("option",{attrs:{value:"4"}},[e._v("4")]),a("option",{attrs:{value:"5"}},[e._v("5")]),a("option",{attrs:{value:"6"}},[e._v("6")]),a("option",{attrs:{value:"7"}},[e._v("7")]),a("option",{attrs:{value:"8"}},[e._v("8")])])],1),a("p"),e._v("\n          Memory: \n          "),a("b-tooltip",{attrs:{label:"menu for assigning memory",type:"is-dark"}},[a("b-select",{attrs:{value:e.redeployModal.ram,expanded:""},on:{input:function(t){return e.redeployModal.ram=t}}},[a("option",{attrs:{value:"512"}},[e._v("512 MB")]),a("option",{attrs:{value:"1024"}},[e._v("1 GB")]),a("option",{attrs:{value:"2048"}},[e._v("2 GB")]),a("option",{attrs:{value:"3072"}},[e._v("3 GB")]),a("option",{attrs:{value:"4096"}},[e._v("4 GB")]),a("option",{attrs:{value:"8192"}},[e._v("8 GB")]),a("option",{attrs:{value:"12288"}},[e._v("12 GB")]),a("option",{attrs:{value:"16384"}},[e._v("16 GB")])])],1),a("p"),e._v("\n          Disk:\n          "),a("b-tooltip",{attrs:{label:"menu for assigning disk",type:"is-dark"}},[a("b-select",{attrs:{value:e.redeployModal.disk},on:{input:function(t){return e.redeployModal.disk=t}}},e._l(e.disks,(function(t,s){return a("option",{key:s,domProps:{value:t}},[e._v("\n                  "+e._s(t)+"\n              ")])})),0)],1),a("p"),e._v("\n          Replicate Original Injection(s):\n          "),a("b-tooltip",{attrs:{label:"menu for replicating injections",type:"is-dark"}},[a("b-select",{attrs:{value:e.redeployModal.inject,expanded:""},on:{input:function(t){return e.redeployModal.inject=t}}},[a("option",{attrs:{value:"true"}},[e._v("Yes")]),a("option",{attrs:{value:"false"}},[e._v("No")])])],1)],1)],1),a("footer",{staticClass:"modal-card-foot buttons is-right"},[a("button",{staticClass:"button is-success",on:{click:function(t){return e.redeployVm(e.redeployModal.name,e.redeployModal.cpus,e.redeployModal.ram,e.redeployModal.disk,e.redeployModal.inject)}}},[e._v("\n          Redeploy "+e._s(e.redeployModal.name)+"\n        ")])])])]),a("b-modal",{attrs:{active:e.diskImageModal.active,"has-modal-card":"","on-cancel":e.resetDiskImageModal},on:{"update:active":function(t){return e.$set(e.diskImageModal,"active",t)}}},[a("div",{staticClass:"modal-card",staticStyle:{width:"25em"}},[a("header",{staticClass:"modal-card-head"},[a("p",{staticClass:"modal-card-title"},[e._v("Create a Disk Image")])]),a("section",{staticClass:"modal-card-body"},[a("font",{attrs:{color:"#202020"}},[e._v("\n          Create disk image of the "+e._s(this.diskImageModal.vm)+" VM with filename:\n        ")]),a("br"),a("br"),a("b-field",{attrs:{type:e.diskImageModal.nameErrType,message:e.diskImageModal.nameErrMsg,autofocus:""}},[a("b-input",{attrs:{type:"text",focus:""},model:{value:e.diskImageModal.name,callback:function(t){e.$set(e.diskImageModal,"name",t)},expression:"diskImageModal.name"}})],1)],1),a("footer",{staticClass:"modal-card-foot buttons is-right"},[a("button",{staticClass:"button is-success",attrs:{disabled:!e.validate},on:{click:function(t){return e.backingImage(e.diskImageModal.vm,e.diskImageModal.name)}}},[e._v("\n          Create\n        ")])])])]),a("hr"),a("b-field",{attrs:{position:"is-left"}},[a("p",{staticClass:"control"}),a("h3",[e._v("Experiment: "+e._s(e.experiment.name))]),a("p")]),e.experimentUser()||e.experimentViewer()?a("b-field",{attrs:{position:"is-right"}},[a("b-autocomplete",{attrs:{placeholder:"Find a VM",icon:"search",data:e.filteredData},on:{input:e.searchVMs,select:function(t){return e.searchVMs(t)}},model:{value:e.search.filter,callback:function(t){e.$set(e.search,"filter",t)},expression:"search.filter"}},[a("template",{slot:"empty"},[e._v("No results found")])],2),a("p",{staticClass:"control"},[a("button",{staticClass:"button",staticStyle:{color:"#686868"},on:{click:function(t){return e.searchVMs("")}}},[a("b-icon",{attrs:{icon:"window-close"}})],1)]),e._v("\n       \n    "),a("p",{staticClass:"control buttons"},[e.adminUser()?a("b-button",{staticClass:"button is-danger",attrs:{slot:"trigger","icon-right":"stop"},on:{click:e.stop},slot:"trigger"}):e._e()],1)],1):e._e(),a("div",[a("b-tabs",{on:{change:e.updateFiles}},[a("b-tab-item",{attrs:{label:"Table"}},[a("b-table",{attrs:{data:e.experiment.vms,paginated:e.table.isPaginated&&e.paginationNeeded,"backend-pagination":"",total:e.table.total,"per-page":e.table.perPage,"pagination-simple":e.table.isPaginationSimple,"pagination-size":e.table.paginationSize,"backend-sorting":"","default-sort-direction":"asc","default-sort":"name"},on:{"page-change":e.onPageChange,sort:e.onSort},scopedSlots:e._u([{key:"default",fn:function(t){return[a("b-table-column",{attrs:{field:"name",label:"VM Name",width:"150",sortable:"",centered:""}},[e.experimentUser()?[a("b-tooltip",{attrs:{label:"start/stop/redeploy the vm",type:"is-dark"}},[a("span",{staticClass:"tag is-medium",class:e.decorator(t.row.running,t.row.redeploying)},[a("div",{staticClass:"field"},[a("div",{on:{click:function(s){return e.getInfo(t.row)}}},[e._v("\n                        "+e._s(t.row.name)+"\n                      ")])])])])]:[a("b-tooltip",{attrs:{label:"get info for the vm",type:"is-dark"}},[a("span",{staticClass:"tag is-medium",class:e.decorator(t.row.running,!t.row.redeploying)},[a("div",{staticClass:"field"},[a("div",{on:{click:function(s){e.expModal.active=!0,e.expModal.vm=t.row}}},[e._v("\n                        "+e._s(t.row.name)+"\n                      ")])])])])],t.row.redeploying?a("section",[a("p"),a("b-progress",{attrs:{size:"is-small",type:"is-warning","show-value":"",value:t.row.percent,format:"percent"}})],1):e._e()],2),a("b-table-column",{attrs:{field:"screenshot",label:"Screenshot"}},[e.updateScreenshot?t.row.running&&!t.row.redeploying&&e.updateScreenshot?[a("a",{attrs:{href:"/api/v1/experiments/"+e.$route.params.id+"/vms/"+t.row.name+"/vnc?token="+e.$store.state.token,target:"_blank"}},[a("img",{attrs:{src:t.row.screenshot}})])]:t.row.redeploying?[a("img",{attrs:{src:s("f898")}})]:[a("img",{attrs:{src:s("1801")}})]:[a("a",{attrs:{href:"/api/v1/experiments/"+e.$route.params.id+"/vms/"+t.row.name+"/vnc?token="+e.$store.state.token,target:"_blank"}},[a("img",{attrs:{src:s("0ed8")}})])]],2),a("b-table-column",{attrs:{field:"host",label:"Host",width:"150",sortable:""}},[e._v("\n              "+e._s(t.row.host)+"\n            ")]),a("b-table-column",{attrs:{field:"ipv4",label:"IPv4",width:"150"}},e._l(t.row.ipv4,(function(t){return a("div",[e._v("\n                "+e._s(t)+"\n              ")])})),0),a("b-table-column",{attrs:{field:"network",label:"Network"}},[e.experimentUser()&&t.row.running?[a("b-tooltip",{attrs:{label:"change vlan(s)",type:"is-dark"}},[a("div",{staticClass:"field"},e._l(t.row.networks,(function(s,n){return a("div",{key:n,on:{click:function(a){e.vlanModal.active=!0,e.vlanModal.vmName=t.row.name,e.vlanModal.vmFromNet=s,e.vlanModal.vmNet=t.row.networks,e.vlanModal.vmNetIndex=n}}},[e._v("\n                      "+e._s(e._f("lowercase")(s))+"\n                    ")])})),0)])]:[e._v("\n                "+e._s(e._f("lowercase")(e._f("stringify")(t.row.networks)))+"\n              ")]],2),a("b-table-column",{attrs:{field:"taps",label:"Taps"}},[e.experimentUser()&&t.row.running?[a("b-tooltip",{attrs:{label:"manage pcap",type:"is-dark"}},[a("div",{staticClass:"field"},e._l(t.row.taps,(function(s,n){return a("div",{key:n,class:e.tapDecorator(t.row.captures,n),on:{click:function(s){return e.handlePcap(t.row,n)}}},[e._v("\n                      "+e._s(e._f("lowercase")(s))+"\n                    ")])})),0)])]:[e._v("\n                "+e._s(e._f("lowercase")(e._f("stringify")(t.row.taps)))+"\n              ")]],2),a("b-table-column",{attrs:{field:"uptime",label:"Uptime",width:"165"}},[e._v("\n              "+e._s(e._f("uptime")(t.row.uptime))+"\n            ")])]}}])},[a("template",{slot:"empty"},[a("section",{staticClass:"section"},[a("div",{staticClass:"content has-text-white has-text-centered"},[e._v("\n                Your search turned up empty!\n              ")])])])],2),a("br"),e.paginationNeeded?a("b-field",{attrs:{grouped:"",position:"is-right"}},[a("div",{staticClass:"control is-flex"},[a("b-switch",{attrs:{size:"is-small",type:"is-light"},on:{input:e.switchPagination},model:{value:e.table.isPaginated,callback:function(t){e.$set(e.table,"isPaginated",t)},expression:"table.isPaginated"}},[e._v("Pagenate")])],1)]):e._e()],1),a("b-tab-item",{attrs:{label:"Files"}},[e.files&&!e.files.length?[a("section",{staticClass:"hero is-light is-bold is-large"},[a("div",{staticClass:"hero-body"},[a("div",{staticClass:"container",staticStyle:{"text-align":"center"}},[a("h1",{staticClass:"title"},[e._v("\n                  There are no files available.\n                ")])])])])]:[a("ul",{staticClass:"fa-ul",staticStyle:{"list-style":"none"}},e._l(e.files,(function(t,s){return a("li",{key:s},[a("font-awesome-icon",{staticClass:"fa-li",attrs:{icon:"file-download"}}),a("a",{attrs:{href:"/api/v1/experiments/"+e.experiment.name+"/files/"+t+"?token="+e.$store.state.token,target:"_blank"}},[e._v("\n                "+e._s(t)+"\n              ")])],1)})),0)]],2)],1)],1),a("b-loading",{attrs:{"is-full-page":!0,active:e.isWaiting,"can-cancel":!1},on:{"update:active":function(t){e.isWaiting=t}}})],1)},j=[],A=(s("386d"),{beforeDestroy:function(){clearInterval(this.update),this.ws.close()},created:function(){var e=Object(T["a"])(regeneratorRuntime.mark((function e(){var t=this;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,this.wsConnect();case 3:this.ws=e.sent,e.next=10;break;case 6:return e.prev=6,e.t0=e["catch"](0),console.log("unable to connect to WebSocket: "+e.t0),e.abrupt("return");case 10:this.ws.onmessage=this.handler,setTimeout((function(){t.updateScreenshot=!0}),3e3),this.updateExperiment();case 13:case"end":return e.stop()}}),e,this,[[0,6]])})));function t(){return e.apply(this,arguments)}return t}(),computed:{filteredData:function(){var e=this;return this.search.vms.filter((function(t){return t.toLowerCase().indexOf(e.search.filter.toLowerCase())>=0}))},paginationNeeded:function(){return!(this.table.total<=this.table.perPage)},validate:function(){var e=/^[a-zA-Z0-9-_]*$/;return e.test(this.diskImageModal.name)?(this.diskImageModal.nameErrType="",this.diskImageModal.nameErrMsg="",!0):(this.diskImageModal.nameErrType="is-danger",this.diskImageModal.nameErrMsg="image names can only contain alphanumeric, dash, and underscore; we will add the file extension",!1)}},methods:{adminUser:function(){return["Global Admin","Experiment Admin"].includes(this.$store.getters.role)},experimentUser:function(){return["Global Admin","Experiment Admin","Experiment User"].includes(this.$store.getters.role)},experimentViewer:function(){return["Experiment Viewer"].includes(this.$store.getters.role)},searchVMs:function(e){null===e&&(e=""),this.search.filter=e,this.updateTable()},switchPagination:function(e){this.table.isPaginated=e,this.updateTable()},updateTable:function(){var e=this.table.currentPage,t=this.table.perPage;this.table.isPaginated||(e=0,t=this.experiment.vm_count);var s={resource:{type:"experiment/vms",name:this.$route.params.id,action:"list"},request:{sort_column:this.table.sortColumn,sort_asc:"asc"===this.table.sortOrder,page_number:e,page_size:t,filter:this.search.filter}};this.ws.send(JSON.stringify(s))},onPageChange:function(e){this.table.currentPage=e,this.updateTable()},onSort:function(e,t){this.table.sortColumn=e,this.table.sortOrder=t,this.updateTable()},handler:function(e){var t=this;e.data.split(/\r?\n/).forEach((function(e){var s=JSON.parse(e);t.handle(s)}))},handle:function(e){switch(e.resource.type){case"experiment/vms":if("list"!=e.resource.action)return;this.experiment.vms=Object(P["a"])(e.result.vms),this.search.filter?this.table.total=e.result.total:this.table.total=this.experiment.vm_count,this.isWaiting=!1;break;case"experiment/vm":var t=e.resource.name.split("/"),s=this.experiment.vms;switch(e.resource.action){case"update":for(var a=0;a<s.length;a++)if(s[a].name==e.result.name){s[a]=e.result;break}break;case"delete":for(var n=0;n<s.length;n++)if(s[n].name==t[1]){s.splice(n,1);break}this.$buefy.toast.open({message:"The "+t[1]+" VM was killed.",type:"is-success"});break;case"start":break;case"starting":break;case"stop":break;case"stopping":break;case"redeploying":break;case"redeployed":break}break;case"experiment/vm/commit":var i=e.resource.name.split("/"),r=this.experiment.vms;switch(e.resource.action){case"commit":for(var o=0;o<r.length;o++){if(r[o].name==i[1]){r[o].redeploying=!1,r[o]=e.result.vm;var l=e.result.disk;this.$buefy.toast.open({message:"The backing image with name "+l+" for the "+i[1]+" VM was successfully created.",type:"is-success",duration:4e3})}this.experiment.vms=Object(P["a"])(r)}break;case"committing":for(var c=0;c<r.length;c++){if(r[c].name==i[1]){r[c].redeploying=!0,r[c].percent=0;var u=e.result.disk;this.$buefy.toast.open({message:"A backing image with name "+u+" for the "+i[1]+" VM is being created.",type:"is-warning",duration:4e3}),this.experiment.vms=Object(P["a"])(r)}break}break;case"progress":for(var p=(100*e.result.percent).toFixed(0),d=0;d<r.length;d++)if(r[d].name==i[1]){r[d].percent=p,this.experiment.vms=Object(P["a"])(r);break}break}break;case"experiment/vm/screenshot":var m=e.resource.name.split("/"),h=this.experiment.vms;switch(e.resource.action){case"update":for(var f=0;f<h.length;f++)if(h[f].name==m[1]){h[f].screenshot=e.result.screenshot;break}this.experiment.vms=Object(P["a"])(h);break}break;case"experiment/vm/capture":var g=e.resource.name.split("/"),b=this.experiment.vms;switch(e.resource.action){case"start":for(var v=0;v<b.length;v++)if(b[v].name==g[1]){null==b[v].captures&&(b[v].captures=[]),b[v].captures.push({vm:g[1],interface:e.result.interface,filename:e.result.filename});break}this.experiment.vms=Object(P["a"])(b),this.$buefy.toast.open({message:"Packet capture was started for the "+g[1]+" VM.",type:"is-success"});break;case"stop":for(var y=0;y<b.length;y++)if(b[y].name==g[1]){b[y].captures=null;break}this.$buefy.toast.open({message:"Packet capture was stopped for the "+g[1]+" VM.",type:"is-success"});break}break;case"experiment/vm/snapshot":var x=e.resource.name.split("/"),_=this.experiment.vms;switch(e.resource.action){case"create":for(var w=0;w<_.length;w++)_[w].name==x[1]&&(_[w].redeploying=!1,this.$buefy.toast.open({message:"The snapshot for the "+x[1]+" VM was successfully created.",type:"is-success",duration:4e3})),this.experiment.vms=Object(P["a"])(_);break;case"creating":for(var k=0;k<_.length;k++)_[k].name==x[1]&&(_[k].redeploying=!0,_[k].percent=0,this.$buefy.toast.open({message:"A snapshot for the "+x[1]+" VM is being created.",type:"is-warning",duration:4e3})),this.experiment.vms=Object(P["a"])(_);break;case"progress":for(var M=(100*e.result.percent).toFixed(0),C=0;C<_.length;C++)if(_[C].name==x[1]){_[C].percent=M,this.experiment.vms=Object(P["a"])(_);break}break;case"restore":for(var $=0;$<_.length;$++)_[$].name==x[1]&&(_[$].redeploying=!1,this.$buefy.toast.open({message:"The "+x[1]+" VM was successfully reverted to a previous snapshot.",type:"is-success",duration:4e3})),this.experiment.vms=Object(P["a"])(_);break;case"restoring":for(var S=0;S<_.length;S++)_[S].name==x[1]&&(_[S].redeploying=!0,_[S].percent=0,this.$buefy.toast.open({message:"A snapshot for the "+x[1]+" VM is being restored.",type:"is-warning",duration:4e3})),this.experiment.vms=Object(P["a"])(_);break}break}},updateExperiment:function(){var e=this;this.$http.get("experiments/"+this.$route.params.id).then((function(t){t.json().then((function(t){e.experiment=t,e.search.vms=t.vms.map((function(e){return e.name})),e.table.total=t.vm_count,e.updateTable()}))}),(function(){e.$buefy.toast.open({message:"Getting the experiments failed.",type:"is-danger",duration:4e3}),e.isWaiting=!1}))},updateDisks:function(){var e=this;this.disks=[],this.$http.get("disks").then((function(t){t.json().then((function(t){if(0==t.disks.length)e.isWaiting=!0;else{for(var s=0;s<t.disks.length;s++)e.disks.push(t.disks[s]);e.isWaiting=!1}}))}),(function(t){console.log("Getting the disks failed with "+t.status),e.isWaiting=!1,e.$toast.open({message:"Getting the disks failed.",type:"is-danger",duration:4e3})}))},updateFiles:function(){var e=this;this.files=[],this.$http.get("experiments/"+this.$route.params.id+"/files").then((function(t){t.json().then((function(t){for(var s=0;s<t.files.length;s++)e.files.push(t.files[s]);e.isWaiting=!1}))}),(function(){e.$buefy.toast.open({message:"Getting the files failed.",type:"is-danger",duration:4e3}),e.isWaiting=!1}))},getInfo:function(e){var t=this;e.redeploying||(this.$http.get("experiments/"+this.$route.params.id+"/vms/"+e.name+"/snapshots").then((function(e){return e.json().then((function(e){e.snapshots.length>0&&(t.expModal.snapshots=e.snapshots)}))}),(function(e){t.$buefy.toast.open({message:"Getting info for the "+name+" VM failed with "+e.status+" status.",type:"is-danger",duration:4e3}),t.isWaiting=!1})),this.expModal.vm=e,this.expModal.active=!0)},snapshots:function(e){var t=this;this.$http.get("experiments/"+this.$route.params.id+"/vms/"+e.name+"/snapshots").then((function(e){return e.json().then((function(e){if(e.snapshots.length>0)return!0}))}),(function(e){t.$buefy.toast.open({message:"Retrieving the snapshots for the "+name+" VM failed with "+e.status+" status.",type:"is-danger",duration:4e3}),t.isWaiting=!1}))},captureSnapshot:function(e){var t=this,s=new Date,a=s.getFullYear()+"-"+("0"+(s.getMonth()+1)).slice(-2)+"-"+("0"+s.getDate()).slice(-2)+"_"+("0"+s.getHours()).slice(-2)+("0"+s.getMinutes()).slice(-2);this.$buefy.dialog.confirm({title:"Create a VM Snapshot",message:"This will create a snapshot for the "+e+" VM.",cancelText:"Cancel",confirmText:"Create",type:"is-success",hasIcon:!0,onConfirm:function(){t.expModal.active=!1,t.resetExpModal(),t.$http.post("experiments/"+t.$route.params.id+"/vms/"+e+"/snapshots",{filename:a},{timeout:0}).then((function(t){204==t.status&&console.log("create snapshot for vm "+e)}),(function(s){t.$buefy.toast.open({message:"Creating the snapshot for the "+e+" VM failed with "+s.status+" status.",type:"is-danger",duration:4e3})}))}})},restoreSnapshot:function(e,t){var s=this;this.$buefy.dialog.confirm({title:"Restore a VM Snapshot",message:"This will revert the "+e+" VM to "+t+".",cancelText:"Cancel",confirmText:"Revert",type:"is-success",hasIcon:!0,onConfirm:function(){s.expModal.active=!1,s.resetExpModal(),s.$http.post("experiments/"+s.$route.params.id+"/vms/"+e+"/snapshots/"+t,{},{timeout:0}).then((function(t){204==t.status&&console.log("restore snapshot for vm "+e)}),(function(a){s.$buefy.toast.open({message:"Restoring the "+t+" snapshot for the "+e+" VM failed with "+a.status+" status.",type:"is-danger",duration:4e3})}))}})},diskImage:function(e,t){var s=new Date,a=s.getFullYear()+""+("0"+s.getMonth()+1).slice(-2)+s.getDate(),n=("0"+s.getHours()).slice(-2)+""+("0"+s.getMinutes()).slice(-2)+("0"+s.getSeconds()).slice(-2);/(.*)_\d{14}/.test(t)?this.diskImageModal.name=t.substring(0,t.indexOf("_"))+"_"+a+n:this.diskImageModal.name=t.substring(0,t.indexOf("."))+"_"+a+n,this.diskImageModal.vm=e,this.expModal.active=!1,this.diskImageModal.active=!0},backingImage:function(e,t){var s=this;this.$buefy.dialog.confirm({title:"Create a Disk Image",message:"This will create a backing image for the "+e+" VM.",cancelText:"Cancel",confirmText:"Create",type:"is-success",hasIcon:!0,onConfirm:function(){s.diskImageModal.active=!1,s.resetDiskImageModal(),s.$http.post("experiments/"+s.$route.params.id+"/vms/"+e+"/commit",{filename:t+".qc2"},{timeout:0}).then((function(t){console.log("backing image for vm "+e+" failed with "+t.status)}),(function(t){s.$buefy.toast.open({message:"Creating the backing image for the "+e+" VM failed with "+t.status+" status.",type:"is-danger",duration:4e3})}))}})},killVm:function(e){var t=this;this.$buefy.dialog.confirm({title:"Kill the VM",message:"This will kill the "+e+" VM. You will not be able to restore this VM until you restart the "+this.$route.params.id+" experiment!",cancelText:"Cancel",confirmText:"KILL IT!",type:"is-danger",hasIcon:!0,onConfirm:function(){t.isWaiting=!0,t.$http.delete("experiments/"+t.$route.params.id+"/vms/"+e).then((function(s){if(204==s.status){for(var a=t.experiment.vms,n=0;n<a.length;n++)if(a[n].name==e){a.splice(n,1);break}t.experiment.vms=Object(P["a"])(a),t.isWaiting=!1}}),(function(s){t.$buefy.toast.open({message:"Killing the "+e+" VM failed with "+s.status+" status.",type:"is-danger",duration:4e3}),t.isWaiting=!1}))}}),this.expModal.active=!1,this.resetExpModal()},stop:function(){var e=this;this.$buefy.dialog.confirm({title:"Stop the Experiment",message:"This will stop the "+this.$route.params.id+" experiment.",cancelText:"Cancel",confirmText:"Stop",type:"is-danger",hasIcon:!0,onConfirm:function(){e.isWaiting=!0,e.$http.post("experiments/"+e.$route.params.id+"/stop").then((function(){e.$router.replace("/experiments/")}),(function(t){e.$buefy.toast.open({message:"Stopping experiment "+e.$route.params.id+" failed with "+t.status+" status.",type:"is-danger",duration:4e3}),e.isWaiting=!1}))}})},decorator:function(e,t){return t?"is-warning":e?"is-success":"is-danger"},tapDecorator:function(e,t){if(e)for(var s=0;s<e.length;s++)if(e[s].interface===t)return"is-success"},handlePcap:function(e,t){var s=this,a=new Date,n=a.getFullYear()+"-"+("0"+(a.getMonth()+1)).slice(-2)+"-"+("0"+a.getDate()).slice(-2)+"_"+("0"+a.getHours()).slice(-2)+("0"+a.getMinutes()).slice(-2);this.$http.get("experiments/"+this.$route.params.id+"/vms/"+e.name+"/captures").then((function(a){return a.json().then((function(a){var i=a.captures,r=!1;if(i)for(var o=0;o<i.length;o++)if(i[o].interface===t){r=!0;break}r?s.$buefy.dialog.confirm({title:"Stop All Packet Captures",message:"This will stop all packet captures for the "+e.name+" VM.",cancelText:"Cancel",confirmText:"Stop",type:"is-warning",hasIcon:!0,onConfirm:function(){s.isWaiting=!0,s.$http.delete("experiments/"+s.$route.params.id+"/vms/"+e.name+"/captures").then((function(e){if(204==e.status){for(var t=s.experiment.vms,a=0;a<t.length;a++)if(t[a].name==e.body.name){t[a]=e.body;break}s.experiment.vms=Object(P["a"])(t),s.isWaiting=!1}}),(function(t){s.$buefy.toast.open({message:"Stopping all packet captures for the "+e.name+" VM failed with "+t.status+" status.",type:"is-danger",duration:4e3}),s.isWaiting=!1}))}}):"disconnected"==e.networks[t]?s.$buefy.toast.open({message:"Cannot capture traffic on a disconnected interface.",type:"is-danger",duration:4e3}):s.$buefy.dialog.confirm({title:"Start a Packet Capture",message:"This will start a packet capture for the "+e.name+" VM, interface "+t+".",cancelText:"Cancel",confirmText:"Start",type:"is-success",hasIcon:!0,onConfirm:function(){s.isWaiting=!0,s.$http.post("experiments/"+s.$route.params.id+"/vms/"+e.name+"/captures",{interface:t,filename:n}).then((function(e){if(204==e.status){for(var t=s.experiment.vms,a=0;a<t.length;a++)if(t[a].name==e.body.name){t[a]=e.body;break}s.experiment.vms=Object(P["a"])(t),s.isWaiting=!1}}),(function(t){s.$buefy.toast.open({message:"Starting packet capture for the "+e.name+" VM failed with "+t.status+" status.",type:"is-danger",duration:4e3}),s.isWaiting=!1}))}})}))}))},startVm:function(e){var t=this;this.$buefy.dialog.confirm({title:"Start the VM",message:"This will start the "+e+" VM.",cancelText:"Cancel",confirmText:"Start",type:"is-success",hasIcon:!0,onConfirm:function(){t.isWaiting=!0,t.$http.post("experiments/"+t.$route.params.id+"/vms/"+e+"/start").then((function(e){for(var s=t.experiment.vms,a=0;a<s.length;a++)if(s[a].name==e.body.name){s[a]=e.body;break}t.experiment.vms=Object(P["a"])(s),t.isWaiting=!1}),(function(s){t.$buefy.toast.open({message:"Starting the "+e+" VM failed with "+s.status+" status.",type:"is-danger",duration:4e3}),t.isWaiting=!1}))}}),this.expModal.active=!1,this.resetExpModal()},pauseVm:function(e){var t=this;this.$buefy.dialog.confirm({title:"Pause the VM",message:"This will pause the "+e+" VM.",cancelText:"Cancel",confirmText:"Pause",type:"is-warning",hasIcon:!0,onConfirm:function(){t.isWaiting=!0,t.$http.post("experiments/"+t.$route.params.id+"/vms/"+e+"/stop").then((function(e){for(var s=t.experiment.vms,a=0;a<s.length;a++)if(s[a].name==e.body.name){s[a]=e.body;break}t.experiment.vms=Object(P["a"])(s),t.isWaiting=!1}),(function(s){t.$buefy.toast.open({message:"Pausing the "+e+" VM failed with "+s.status+" status.",type:"is-danger",duration:4e3}),t.isWaiting=!1}))}}),this.expModal.active=!1,this.resetExpModal()},redeploy:function(e){this.updateDisks(),this.redeployModal.name=e.name,this.redeployModal.cpus=e.cpus,this.redeployModal.ram=e.ram,this.redeployModal.disk=e.disk,this.redeployModal.inject=!1,this.redeployModal.active=!0,this.expModal.active=!1},redeployVm:function(e,t,s,a,n){var i=this,r={cpus:parseInt(t),ram:parseInt(s),disk:a},o="experiments/"+this.$route.params.id+"/vms/"+e+"/redeploy";n&&(o+="?replicate-injects=true"),this.$http.post(o,r).then(null,(function(t){i.$buefy.toast.open({message:"Redeploying the "+e+" VM failed with "+t.status+" status.",type:"is-danger",duration:4e3})})),this.redeployModal.active=!1,this.resetRedeployModal()},changeVlan:function(e,t,s,a){var n=this;"0"===t?this.$buefy.dialog.confirm({title:"Disconnect a VM Network Interface",message:"This will disconnect the "+e+" interface for the "+a+" VM.",cancelText:"Cancel",confirmText:"Disconnect",type:"is-warning",hasIcon:!0,onConfirm:function(){n.isWaiting=!0;var t={interface:{index:e,vlan:0}};n.$http.patch("experiments/"+n.$route.params.id+"/vms/"+a,t).then((function(e){for(var t=n.experiment.vms,s=0;s<t.length;s++)if(t[s].name==e.body.name){t[s]=e.body;break}n.experiment.vms=Object(P["a"])(t),n.isWaiting=!1}),(function(e){n.$buefy.toast.open({message:"Disconnecting the network for the "+a+" VM failed with "+e.status+" status.",type:"is-danger",duration:4e3}),n.isWaiting=!1}))}}):this.$buefy.dialog.confirm({title:"Change the VLAN",message:"This will change the VLAN from "+s.toLowerCase()+" to "+t.alias.toLowerCase()+" ("+t.vlan+") for the "+a+" VM.",cancelText:"Cancel",confirmText:"Change",type:"is-warning",hasIcon:!0,onConfirm:function(){n.isWaiting=!0;var s={interface:{index:e,vlan:t.vlan}};n.$http.patch("experiments/"+n.$route.params.id+"/vms/"+a,s).then((function(e){for(var t=n.experiment.vms,s=0;s<t.length;s++)if(t[s].name==e.body.name){t[s]=e.body;break}n.experiment.vms=Object(P["a"])(t),n.isWaiting=!1}),(function(e){n.$buefy.toast.open({message:"Changing the VLAN for the "+a+" VM failed with "+e.status+" status.",type:"is-danger",duration:4e3}),n.isWaiting=!1}))}}),this.vlanModal.active=!1},resetExpModal:function(){this.expModal={active:!1,vm:[],snapshots:!1}},resetRedeployModal:function(){this.redeployModal={active:!1,name:null,cpus:null,ram:null,disk:null,inject:!1}},resetDiskImageModal:function(){this.diskImageModal={active:!1,vm:null,name:null,dateTime:null,nameErrType:null,nameErrMsg:null}}},data:function(){return{search:{vms:[],filter:""},table:{isPaginated:!0,isPaginationSimple:!0,currentPage:1,perPage:10,total:0,sortColumn:"name",sortOrder:"asc",paginationSize:"is-small"},expModal:{active:!1,vm:[],snapshots:!1},vlanModal:{active:!1,vmName:null,vmFromNet:null,vmNetIndex:null,vmNet:[]},redeployModal:{active:!1,name:null,cpus:null,ram:null,disk:null,inject:!1},diskImageModal:{active:!1,vm:null,name:null,dateTime:null,nameErrType:null,nameErrMsg:null},experiment:[],files:[],disks:[],vlan:null,expName:null,isWaiting:!0,updateScreenshot:!1}}}),D=A,L=(s("d82d"),Object(d["a"])(D,I,j,!1,null,"59ee546a",null)),G=L.exports,R=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{staticClass:"content"},[s("b-modal",{attrs:{active:e.expModal.active,"has-modal-card":""},on:{"update:active":function(t){return e.$set(e.expModal,"active",t)}}},[s("div",{staticClass:"modal-card",staticStyle:{width:"25em"}},[s("header",{staticClass:"modal-card-head"},[s("p",{staticClass:"modal-card-title"},[e._v("VM "+e._s(e.expModal.vm.name?e.expModal.vm.name:"unknown"))])]),s("section",{staticClass:"modal-card-body"},[s("p",[e._v("Host: "+e._s(e.expModal.vm.host))]),s("p",[e._v("IPv4: "+e._s(e._f("stringify")(e.expModal.vm.ipv4)))]),s("p",[e._v("CPU(s): "+e._s(e.expModal.vm.cpus))]),s("p",[e._v("Memory: "+e._s(e._f("ram")(e.expModal.vm.ram)))]),s("p",[e._v("Disk: "+e._s(e.expModal.vm.disk))]),s("p",[e._v("Uptime: "+e._s(e._f("uptime")(e.expModal.vm.uptime)))]),s("p",[e._v("Network(s): "+e._s(e._f("lowercase")(e._f("stringify")(e.expModal.vm.networks))))]),s("p",[e._v("Taps: "+e._s(e._f("lowercase")(e._f("stringify")(e.expModal.vm.taps))))])]),s("footer",{staticClass:"modal-card-foot"})])]),s("hr"),s("b-field",{attrs:{position:"is-left"}},[s("p",{staticClass:"control"}),s("h3",[e._v("Experiment: "+e._s(this.$route.params.id))]),s("p")]),e.experimentUser()||e.experimentViewer()?s("b-field",{attrs:{position:"is-right"}},[s("b-autocomplete",{attrs:{placeholder:"Find a VM",icon:"search",data:e.filteredData},on:{select:function(t){return e.filtered=t}},model:{value:e.searchName,callback:function(t){e.searchName=t},expression:"searchName"}},[s("template",{slot:"empty"},[e._v("No results found")])],2),s("p",{staticClass:"control"},[s("button",{staticClass:"button",staticStyle:{color:"#686868"},on:{click:function(t){e.searchName=""}}},[s("b-icon",{attrs:{icon:"window-close"}})],1)]),e._v("\n       \n    "),s("p",{staticClass:"control buttons"},[e.adminUser()?s("b-button",{staticClass:"button is-success",attrs:{slot:"trigger","icon-right":"play"},on:{click:e.start},slot:"trigger"}):e._e()],1),e._v("\n       \n    "),s("p",{staticClass:"control"},[s("b-tooltip",{attrs:{label:"menu for scheduling hosts to the experiment",type:"is-light",multilined:""}},[s("b-dropdown",{staticClass:"is-right",attrs:{"aria-role":"list"},model:{value:e.algorithm,callback:function(t){e.algorithm=t},expression:"algorithm"}},[s("button",{staticClass:"button is-light",attrs:{slot:"trigger"},slot:"trigger"},[s("b-icon",{attrs:{icon:"bars"}})],1),e._l(e.schedules,(function(t,a){return s("b-dropdown-item",{key:a,attrs:{value:t},on:{click:e.updateSchedule}},[s("font",{attrs:{color:"#202020"}},[e._v(e._s(t))])],1)}))],2)],1)],1)],1):e._e(),s("div",[s("b-tabs",{on:{change:e.updateFiles}},[s("b-tab-item",{attrs:{label:"Table"}},[s("b-table",{key:e.table.key,attrs:{data:e.vms,paginated:e.table.isPaginated&&e.paginationNeeded,"per-page":e.table.perPage,"current-page":e.table.currentPage,"pagination-simple":e.table.isPaginationSimple,"pagination-size":e.table.paginationSize,"default-sort-direction":e.table.defaultSortDirection,"default-sort":"name"},on:{"update:currentPage":function(t){return e.$set(e.table,"currentPage",t)},"update:current-page":function(t){return e.$set(e.table,"currentPage",t)}},scopedSlots:e._u([{key:"default",fn:function(t){return[s("b-table-column",{attrs:{field:"name",label:"VM",sortable:""}},[e.adminUser()?[s("b-tooltip",{attrs:{label:"get info on the vm",type:"is-dark"}},[s("div",{staticClass:"field"},[s("div",{on:{click:function(s){e.expModal.active=!0,e.expModal.vm=t.row}}},[e._v("\n                        "+e._s(t.row.name)+"\n                      ")])])])]:[e._v("\n                  "+e._s(t.row.name)+"\n                ")]],2),s("b-table-column",{attrs:{field:"host",label:"Host",width:"200",sortable:""}},[e.adminUser()?[s("b-tooltip",{attrs:{label:"assign the vm to a specific host",type:"is-dark"}},[s("b-field",[s("b-select",{attrs:{value:t.row.host,expanded:""},on:{input:function(s){return e.assignHost(t.row.name,s)}}},e._l(e.hosts,(function(t,a){return s("option",{key:a,domProps:{value:t}},[e._v("\n                          "+e._s(t)+"\n                        ")])})),0),s("p",{staticClass:"control"},[s("button",{staticClass:"button",on:{click:function(s){return e.unassignHost(t.row.name)}}},[s("b-icon",{attrs:{icon:"window-close"}})],1)])],1)],1)]:[e._v("\n                  "+e._s(t.row.host)+"\n                ")]],2),s("b-table-column",{attrs:{field:"ipv4",label:"IPv4"}},e._l(t.row.ipv4,(function(t){return s("div",[e._v("\n                  "+e._s(t)+"\n                ")])})),0),s("b-table-column",{attrs:{field:"cpus",label:"CPUs",sortable:"",centered:""}},[e.adminUser()?[s("b-tooltip",{attrs:{label:"menu for assigning vm(s) cpus",type:"is-dark"}},[s("b-select",{attrs:{value:t.row.cpus,expanded:""},on:{input:function(s){return e.assignCpu(t.row.name,s)}}},[s("option",{attrs:{value:"1"}},[e._v("1")]),s("option",{attrs:{value:"2"}},[e._v("2")]),s("option",{attrs:{value:"3"}},[e._v("3")]),s("option",{attrs:{value:"4"}},[e._v("4")])])],1)]:[e._v("\n                  "+e._s(t.row.cpus)+"\n                ")]],2),s("b-table-column",{attrs:{field:"ram",label:"Memory",sortable:"",centered:""}},[e.adminUser()?[s("b-tooltip",{attrs:{label:"menu for assigning vm(s) memory",type:"is-dark"}},[s("b-select",{attrs:{value:t.row.ram,expanded:""},on:{input:function(s){return e.assignRam(t.row.name,s)}}},[s("option",{attrs:{value:"512"}},[e._v("512 MB")]),s("option",{attrs:{value:"1024"}},[e._v("1 GB")]),s("option",{attrs:{value:"2048"}},[e._v("2 GB")]),s("option",{attrs:{value:"3072"}},[e._v("3 GB")]),s("option",{attrs:{value:"4096"}},[e._v("4 GB")]),s("option",{attrs:{value:"8192"}},[e._v("8 GB")]),s("option",{attrs:{value:"12288"}},[e._v("12 GB")]),s("option",{attrs:{value:"16384"}},[e._v("16 GB")])])],1)]:[e._v("\n                  "+e._s(t.row.ram)+"\n                ")]],2),s("b-table-column",{attrs:{field:"disk",label:"Disk"}},[e.adminUser()?[s("b-tooltip",{attrs:{label:"menu for assigning vm(s) disk",type:"is-dark"}},[s("b-select",{attrs:{value:t.row.disk},on:{input:function(s){return e.assignDisk(t.row.name,s)}}},e._l(e.disks,(function(t,a){return s("option",{key:a,domProps:{value:t}},[e._v("\n                          "+e._s(t)+"\n                      ")])})),0)],1)]:[e._v("\n                  "+e._s(t.row.disk)+"\n                ")]],2),e.experimentUser()?s("b-table-column",{attrs:{label:"Boot",centered:""}},[s("b-tooltip",{attrs:{label:"control whether or not VM boots",type:"is-dark"}},[s("div",{on:{click:function(s){return e.updateDnb(t.row.name,!t.row.dnb)}}},[s("font-awesome-icon",{class:e.bootDecorator(t.row.dnb),attrs:{icon:"bolt"}})],1)])],1):e._e()]}}])},[s("template",{slot:"empty"},[s("section",{staticClass:"section"},[s("div",{staticClass:"content has-text-white has-text-centered"},[e._v("\n                  Your search turned up empty!\n                ")])])])],2),s("br"),e.paginationNeeded?s("b-field",{attrs:{grouped:"",position:"is-right"}},[s("div",{staticClass:"control is-flex"},[s("b-switch",{attrs:{size:"is-small",type:"is-light"},model:{value:e.table.isPaginated,callback:function(t){e.$set(e.table,"isPaginated",t)},expression:"table.isPaginated"}},[e._v("Pagenate")])],1)]):e._e()],1),s("b-tab-item",{attrs:{label:"Files"}},[e.files&&!e.files.length?[s("section",{staticClass:"hero is-light is-bold is-large"},[s("div",{staticClass:"hero-body"},[s("div",{staticClass:"container",staticStyle:{"text-align":"center"}},[s("h1",{staticClass:"title"},[e._v("\n                  There are no files available.\n                ")])])])])]:[s("ul",{staticClass:"fa-ul",staticStyle:{"list-style":"none"}},e._l(e.files,(function(t,a){return s("li",{key:a},[s("font-awesome-icon",{staticClass:"fa-li",attrs:{icon:"file-download"}}),s("a",{attrs:{href:"/api/v1/experiments/"+e.experiment.name+"/files/"+t+"?token="+e.$store.state.token,target:"_blank"}},[e._v("\n                "+e._s(t)+"\n              ")])],1)})),0)]],2)],1)],1),s("b-loading",{attrs:{"is-full-page":!0,active:e.isWaiting,"can-cancel":!1},on:{"update:active":function(t){e.isWaiting=t}}})],1)},z=[],F={beforeDestroy:function(){clearInterval(this.update),this.ws.close()},created:function(){var e=Object(T["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,this.wsConnect();case 3:this.ws=e.sent,e.next=10;break;case 6:return e.prev=6,e.t0=e["catch"](0),console.log("unable to connect to WebSocket: "+e.t0),e.abrupt("return");case 10:this.ws.onmessage=this.handler,this.updateExperiment(),this.adminUser()&&(this.updateHosts(),this.updateDisks());case 13:case"end":return e.stop()}}),e,this,[[0,6]])})));function t(){return e.apply(this,arguments)}return t}(),computed:{vms:function(){var e=this.experiment.vms,t=new RegExp(this.searchName,"i"),s=[];for(var a in e){var n=e[a];n.name.match(t)&&s.push(n)}return s},filteredData:function(){var e=this,t=this.vms.map((function(e){return e.name}));return t.filter((function(t){return t.toString().toLowerCase().indexOf(e.searchName.toLowerCase())>=0}))},paginationNeeded:function(){return!(this.vms.length<=10)}},methods:{adminUser:function(){return["Global Admin","Experiment Admin"].includes(this.$store.getters.role)},experimentUser:function(){return["Global Admin","Experiment Admin","Experiment User"].includes(this.$store.getters.role)},experimentViewer:function(){return["Experiment Viewer"].includes(this.$store.getters.role)},bootDecorator:function(e){return e?"":"boot"},handler:function(e){var t=this;e.data.split(/\r?\n/).forEach((function(e){var s=JSON.parse(e);t.handle(s)}))},handle:function(e){switch(e.resource.type){case"experiment":if("schedule"!=e.resource.action)return;for(var t=this.experiment.vms,s=0;s<e.result.schedule.length;s++)for(var a=0;s<t.length;a++)if(t[a].name==e.result.schedule[s].vm){t[a].host=e.result.schedule[s].host;break}this.experiment.vms=Object(P["a"])(t),this.$buefy.toast.open({message:"The VMs for this experiment have been scheduled.",type:"is-success"});break;case"experiment/vm":if("update"!=e.resource.action)return;for(var n=this.experiment.vms,i=0;i<n.length;i++)if(n[i].name==e.result.name){n[i]=e.result;break}this.experiment.vms=Object(P["a"])(n),this.$buefy.toast.open({message:"The VM "+e.result.name+" has been successfully updated.",type:"is-success"});break}},updateExperiment:function(){var e=this;this.$http.get("experiments/"+this.$route.params.id).then((function(t){t.json().then((function(t){e.experiment=t,e.isWaiting=!1}))}),(function(t){e.isWaiting=!1,e.$buefy.toast.open({message:"Getting the experiments failed.",type:"is-danger",duration:4e3})}))},updateHosts:function(){var e=this;this.$http.get("hosts").then((function(t){t.json().then((function(t){if(0==t.hosts.length)e.isWaiting=!0;else{for(var s=0;s<t.hosts.length;s++)t.hosts[s].schedulable&&e.hosts.push(t.hosts[s].name);e.isWaiting=!1}}))}),(function(t){e.isWaiting=!1,e.$buefy.toast.open({message:"Getting the hosts failed.",type:"is-danger",duration:4e3})}))},updateDisks:function(){var e=this;this.$http.get("disks").then((function(t){t.json().then((function(t){if(0==t.disks.length)e.isWaiting=!0;else{for(var s=0;s<t.disks.length;s++)e.disks.push(t.disks[s]);e.isWaiting=!1}}))}),(function(t){e.isWaiting=!1,e.$buefy.toast.open({message:"Getting the disks failed.",type:"is-danger",duration:4e3})}))},updateFiles:function(){var e=this;this.$http.get("experiments/"+this.$route.params.id+"/files").then((function(t){t.json().then((function(t){for(var s=0;s<t.files.length;s++)e.files.push(t.files[s]);e.isWaiting=!1}))}),(function(t){e.isWaiting=!1,e.$buefy.toast.open({message:"Getting the files failed.",type:"is-danger",duration:4e3})}))},start:function(){var e=this;this.$buefy.dialog.confirm({title:"Start the Experiment",message:"This will start the "+this.$route.params.id+" experiment.",cancelText:"Cancel",confirmText:"Start",type:"is-success",hasIcon:!0,onConfirm:function(){e.isWaiting=!0,e.$http.post("experiments/"+e.$route.params.id+"/start").then((function(t){console.log("the "+e.$route.params.id+" experiment was started."),e.$router.replace("/experiments/")}),(function(t){e.$buefy.toast.open({message:"Starting experiment "+e.$route.params.id+" failed with "+t.status+" status.",type:"is-danger",duration:4e3}),e.isWaiting=!1}))}})},assignHost:function(e,t){var s=this;this.$buefy.dialog.confirm({title:"Assign a Host",message:"This will assign the "+e+" VM to the "+t+" host.",cancelText:"Cancel",confirmText:"Assign Host",type:"is-success",hasIcon:!0,onConfirm:function(){s.isWaiting=!0;var a={host:t};s.$http.patch("experiments/"+s.$route.params.id+"/vms/"+e,a).then((function(e){for(var t=s.experiment.vms,a=0;a<t.length;a++)if(t[a].name==e.body.name){t[a]=e.body;break}s.experiment.vms=Object(P["a"])(t),s.isWaiting=!1}),(function(a){s.$buefy.toast.open({message:"Assigning the "+e+" VM to the "+t+" host failed with "+a.status+" status.",type:"is-danger",duration:4e3}),s.isWaiting=!1}))},onCancel:function(){s.tableKey+=1}})},unassignHost:function(e){var t=this;this.$buefy.dialog.confirm({title:"Unassign a Host",message:"This will cancel the host assignment for "+e+" VM.",cancelText:"Cancel",confirmText:"Unassign Host",type:"is-success",hasIcon:!0,onConfirm:function(){t.isWaiting=!0;var s={host:""};t.$http.patch("experiments/"+t.$route.params.id+"/vms/"+e,s).then((function(e){for(var s=t.experiment.vms,a=0;a<s.length;a++)if(s[a].name==e.body.name){s[a]=e.body;break}t.experiment.vms=Object(P["a"])(s),t.isWaiting=!1}),(function(s){t.$buefy.toast.open({message:"Canceling the "+host+" assignment for the "+e+" VM failed with "+s.status+" status.",type:"is-danger",duration:4e3}),t.isWaiting=!1}))}})},assignCpu:function(e,t){var s=this;this.$buefy.dialog.confirm({title:"Assign CPUs",message:"This will assign "+t+" cpu(s) to the "+e+" VM.",cancelText:"Cancel",confirmText:"Assign CPUs",type:"is-success",hasIcon:!0,onConfirm:function(){s.isWaiting=!0;var a={cpus:t};s.$http.patch("experiments/"+s.$route.params.id+"/vms/"+e,a).then((function(e){for(var t=s.experiment.vms,a=0;a<t.length;a++)if(t[a].name==e.body.name){t[a]=e.body;break}s.experiment.vms=Object(P["a"])(t),s.isWaiting=!1}),(function(a){s.$buefy.toast.open({message:"Assigning "+t+" cpu(s) to the "+e+" VM failed with "+a.status+" status.",type:"is-danger",duration:4e3}),s.isWaiting=!1}))},onCancel:function(){s.tableKey+=1}})},assignRam:function(e,t){var s=this;this.$buefy.dialog.confirm({title:"Assign Memory",message:"This will assign "+t+" of memory to the "+e+" VM.",cancelText:"Cancel",confirmText:"Assign Memory",type:"is-success",hasIcon:!0,onConfirm:function(){s.isWaiting=!0;var a={ram:t};s.$http.patch("experiments/"+s.$route.params.id+"/vms/"+e,a).then((function(e){for(var t=s.experiment.vms,a=0;a<t.length;a++)if(t[a].name==e.body.name){t[a]=e.body;break}s.experiment.vms=Object(P["a"])(t),s.isWaiting=!1}),(function(a){s.$buefy.toast.open({message:"Assigning "+t+" of memory to the "+e+" VM failed with "+a.status+" status.",type:"is-danger",duration:4e3}),s.isWaiting=!1}))},onCancel:function(){s.tableKey+=1}})},assignDisk:function(e,t){var s=this;this.$buefy.dialog.confirm({title:"Assign a Disk Image",message:"This will assign the "+t+" disk image to the "+e+" VM.",cancelText:"Cancel",confirmText:"Assign Disk",type:"is-success",hasIcon:!0,onConfirm:function(){s.isWaiting=!0;var a={disk:t};s.$http.patch("experiments/"+s.$route.params.id+"/vms/"+e,a).then((function(e){for(var t=s.experiment.vms,a=0;a<t.length;a++)if(t[a].name==e.body.name){t[a]=e.body;break}s.experiment.vms=Object(P["a"])(t),s.isWaiting=!1}),(function(a){s.$buefy.toast.open({message:"Assigning the "+t+" to the "+e+" VM failed with "+a.status+" status.",type:"is-danger",duration:4e3}),s.isWaiting=!1}))},onCancel:function(){s.tableKey+=1}})},updateDnb:function(e,t){var s=this;t?this.$buefy.dialog.confirm({title:"Set Do NOT Boot",message:"This will set the "+e+" VM to NOT boot when the experiment starts.",cancelText:"Cancel",confirmText:"Do NOT Boot",type:"is-warning",hasIcon:!0,onConfirm:function(){s.isWaiting=!0;var a={dnb:t};s.$http.patch("experiments/"+s.$route.params.id+"/vms/"+e,a).then((function(e){for(var t=s.experiment.vms,a=0;a<t.length;a++)if(t[a].name==e.body.name){t[a]=e.body;break}s.experiment.vms=Object(P["a"])(t),s.isWaiting=!1}),(function(t){s.$buefy.toast.open({message:"Setting the "+e+" VM to NOT boot when experiment starts failed with "+t.status+" status.",type:"is-danger",duration:4e3}),s.isWaiting=!1}))}}):this.$buefy.dialog.confirm({title:"Set Boot",message:"This will set the "+e+" VM to boot when the experiment starts.",cancelText:"Cancel",confirmText:"Boot",type:"is-success",hasIcon:!0,onConfirm:function(){s.isWaiting=!0;var a={dnb:t};s.$http.patch("experiments/"+s.$route.params.id+"/vms/"+e,a).then((function(e){for(var t=s.experiment.vms,a=0;a<t.length;a++)if(t[a].name==e.body.name){t[a]=e.body;break}s.experiment.vms=Object(P["a"])(t),s.isWaiting=!1}),(function(t){s.$buefy.toast.open({message:"Setting the "+e+" VM to boot when experiment starts failed with "+t.status+" status.",type:"is-danger",duration:4e3}),s.isWaiting=!1}))}})},updateSchedule:function(){var e=this;this.$buefy.dialog.confirm({title:"Assign a Host Schedule",message:"This will schedule host(s) with the "+this.algorithm+" algorithm for the "+this.$route.params.id+" experiment.",cancelText:"Cancel",confirmText:"Assign Schedule",type:"is-success",hasIcon:!0,onConfirm:function(){e.isWaiting=!0,e.$http.post("experiments/"+e.$route.params.id+"/schedule",{algorithm:e.algorithm}).then((function(t){for(var s=e.experiment.vms,a=0;a<s.length;a++)if(s[a].name==t.body.name){s[a]=t.body;break}e.experiment.vms=Object(P["a"])(s),e.isWaiting=!1}),(function(t){e.$buefy.toast.open({message:"Scheduling the host(s) with the "+e.algorithm+" for the "+e.$route.params.id+" experiment failed with "+t.status+" status.",type:"is-danger",duration:4e3}),e.isWaiting=!1}))}})}},data:function(){return{table:{key:0,isPaginated:!0,perPage:10,currentPage:1,isPaginationSimple:!0,paginationSize:"is-small",defaultSortDirection:"asc"},expModal:{active:!1,vm:[]},schedules:["isolate_experiment","round_robin"],experiment:[],files:[],hosts:[],disks:[],searchName:"",filtered:null,algorithm:null,dnb:!1,isWaiting:!0}}},B=F,Y=(s("0350"),Object(d["a"])(B,R,z,!1,null,"b2f53b8c",null)),H=Y.exports,J=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"content"},[[a("hr"),a("b-field",{attrs:{position:"is-left"}},[a("p",{staticClass:"control"},[null==e.exp?[a("h3",[e._v("All Experiments")])]:[a("h3",[e._v("Experiment: "+e._s(e.exp))])]],2)]),a("br"),a("br"),a("b-field",{attrs:{position:"is-right"}},[a("b-autocomplete",{attrs:{placeholder:"Find a VM",icon:"search",data:e.filteredData},on:{select:function(t){return e.filtered=t}},model:{value:e.searchName,callback:function(t){e.searchName=t},expression:"searchName"}},[a("template",{slot:"empty"},[e._v("No results found")])],2),a("p",{staticClass:"control"},[a("button",{staticClass:"button",staticStyle:{color:"#686868"},on:{click:function(t){e.searchName=""}}},[a("b-icon",{attrs:{icon:"window-close"}})],1)]),e._v("\n         \n      "),a("p",{staticClass:"control buttons"},[a("b-dropdown",{staticClass:"is-right",attrs:{"aria-role":"list"},model:{value:e.exp,callback:function(t){e.exp=t},expression:"exp"}},[a("button",{staticClass:"button is-light",attrs:{slot:"trigger","icon-left":"caret"},slot:"trigger"},[e._v("\n            Select Experiment\n          ")]),a("b-dropdown-item",{on:{click:function(t){e.searchName="",e.exp=null}}},[a("font",{attrs:{color:"#202020"}},[e._v("All Experiments")])],1),e._l(e.experiments,(function(t,s){return a("b-dropdown-item",{key:s,attrs:{value:t},on:{click:function(s){e.searchName="",e.exp=t}}},[a("font",{attrs:{color:"#202020"}},[e._v(e._s(t))])],1)}))],2)],1)],1),e._l(e.chunkedVMs,(function(t){return a("div",[a("div",{staticClass:"tile is-ancestor"},[a("div",{staticClass:"tile is-parent"},[null==e.exp?e._l(t,(function(t){return a("div",{staticClass:"tile is-child box is-4",staticStyle:{"background-color":"grey"}},[a("p",{staticClass:"title",staticStyle:{color:"whitesmoke","font-size":"medium"}},[e._v("\n                "+e._s(e.vmFullName(t))+"\n              ")]),a("figure",{staticClass:"image"},[t.running?[a("a",{attrs:{href:"/api/v1/experiments/"+t.experiment+"/vms/"+t.name+"/vnc?token="+e.$store.state.token,target:"_blank"}},[a("img",{attrs:{src:t.screenshot}})])]:[a("img",{attrs:{src:s("1801")}})]],2)])})):e._l(t,(function(t){return a("div",{staticClass:"tile is-child box is-4",staticStyle:{"background-color":"grey"}},[t.experiment===e.exp?a("p",{staticClass:"title",staticStyle:{color:"whitesmoke","font-size":"medium"}},[e._v("\n                "+e._s(e.vmFullName(t))+"\n              ")]):e._e(),a("figure",{staticClass:"image"},[t.running&&t.experiment===e.exp?[a("a",{attrs:{href:"/api/v1/experiments/"+t.experiment+"/vms/"+t.name+"/vnc?token="+e.$store.state.token,target:"_blank"}},[a("img",{attrs:{src:t.screenshot}})])]:t.experiment===e.exp?[a("img",{attrs:{src:s("1801")}})]:e._e()],2)])}))],2)])])})),a("b-loading",{attrs:{"is-full-page":!0,active:e.isWaiting,"can-cancel":!1},on:{"update:active":function(t){e.isWaiting=t}}})]],2)},q=[],K={beforeDestroy:function(){clearInterval(this.update)},created:function(){this.updateVms(),this.periodicUpdateVms()},computed:{getVms:function(){var e=this,t=this.vms;this.exp&&(t=t.filter((function(t){return t.experiment===e.exp})));var s=new RegExp(this.searchName,"i"),a=[];for(var n in t){var i=t[n],r=i.name;this.exp||(r=i.experiment+"_"+i.name),r.match(s)&&a.push(i)}return _.sortBy(a,(function(e){return e.experiment.toLowerCase()+"_"+e.name.toLowerCase()}))},experiments:function(){return Object(P["a"])(new Set(this.vms.map((function(e){return e.experiment}))))},chunkedVMs:function(){return _.chunk(this.getVms,3)},filteredData:function(){var e=this,t=[],s=this.getVms;return t=this.exp?s.map((function(e){return e.name})):s.map((function(e){return e.experiment+"_"+e.name})),t.filter((function(t){return t.toString().toLowerCase().indexOf(e.searchName.toLowerCase())>=0}))}},methods:{updateVms:function(){var e=this;this.$http.get("vms?screenshot=500").then((function(t){return t.json().then((function(t){e.vms=t.vms,e.isWaiting=!1}))}),(function(t){e.isWaiting=!1,e.$buefy.toast.open({message:"Getting the VMs failed.",type:"is-danger",duration:4e3})}))},periodicUpdateVms:function(){var e=this;this.update=setInterval((function(){e.updateVms()}),3e4)},vmFullName:function(e){return this.exp?e.name:e.experiment+"_"+e.name}},data:function(){return{exp:null,vms:[],searchName:"",filtered:null,isWaiting:!0}}},Z=K,Q=(s("8174"),Object(d["a"])(Z,J,q,!1,null,"53be3843",null)),X=Q.exports,ee={components:{running:G,stopped:H,vmtiles:X},computed:{component:function(){var e=this;this.$http.get("experiments/"+this.$route.params.id).then((function(t){t.json().then((function(t){e.running=t.running}))}),(function(t){e.isWaiting=!1,e.$toast.open({message:"Getting the "+e.$route.params.id+" experiment failed.",type:"is-danger",duration:4e3})}));var t=this.$store.getters.role;return"VM Viewer"===t?"vmtiles":this.running?"running":"stopped"}},data:function(){return{running:null}}},te=ee,se=Object(d["a"])(te,O,U,!1,null,null,null),ae=se.exports,ne=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{staticClass:"content"},[s("hr"),s("b-table",{attrs:{data:e.hosts,paginated:e.table.isPaginated&&e.paginationNeeded,"per-page":e.table.perPage,"current-page":e.table.currentPage,"pagination-simple":e.table.isPaginationSimple,"pagination-size":e.table.paginationSize,"default-sort-direction":e.table.defaultSortDirection,"default-sort":"name"},on:{"update:currentPage":function(t){return e.$set(e.table,"currentPage",t)},"update:current-page":function(t){return e.$set(e.table,"currentPage",t)}},scopedSlots:e._u([{key:"default",fn:function(t){return[s("b-table-column",{attrs:{field:"name",label:"Name",width:"150",sortable:""}},[e._v("\n          "+e._s(t.row.name)+"\n        ")]),s("b-table-column",{attrs:{field:"cpus",label:"CPUs",width:"50",sortable:"",centered:""}},[e._v("\n          "+e._s(t.row.cpus)+"\n        ")]),s("b-table-column",{attrs:{field:"load",label:"Load",width:"250",centered:""}},[s("span",{staticClass:"tag",class:e.decorator(t.row.load[0],t.row.cpus)},[e._v("\n            "+e._s(t.row.load[0])+"\n          ")]),e._v("\n          --\n          "),s("span",{staticClass:"tag",class:e.decorator(t.row.load[1],t.row.cpus)},[e._v("\n            "+e._s(t.row.load[1])+"\n          ")]),e._v("\n          --\n          "),s("span",{staticClass:"tag",class:e.decorator(t.row.load[2],t.row.cpus)},[e._v("\n            "+e._s(t.row.load[2])+"\n          ")])]),s("b-table-column",{attrs:{field:"mem_used",label:"RAM Used",width:"100",centered:""}},[s("span",{staticClass:"tag",class:e.decorator(t.row.memused,t.row.memtotal)},[e._v("\n            "+e._s(e._f("ram")(t.row.memused))+"\n          ")])]),s("b-table-column",{attrs:{field:"mem_total",label:"RAM Total",width:"100",centered:""}},[e._v("\n          "+e._s(e._f("ram")(t.row.memtotal))+"\n        ")]),s("b-table-column",{attrs:{field:"bandwidth",label:"Bandwidth (MB/sec)",width:"200",centered:""}},[e._v("\n          "+e._s(t.row.bandwidth)+"\n        ")]),s("b-table-column",{attrs:{field:"no_vms",label:"# of VMs",width:"100",sortable:"",centered:""}},[e._v("\n          "+e._s(t.row.vms)+"\n        ")]),s("b-table-column",{attrs:{field:"uptime",label:"Uptime",width:"165"}},[e._v("\n          "+e._s(e._f("uptime")(t.row.uptime))+"\n        ")])]}}])}),s("br"),e.paginationNeeded?s("b-field",{attrs:{grouped:"",position:"is-right"}},[s("div",{staticClass:"control is-flex"},[s("b-switch",{attrs:{size:"is-small",type:"is-light"},model:{value:e.table.isPaginated,callback:function(t){e.$set(e.table,"isPaginated",t)},expression:"table.isPaginated"}},[e._v("Pagenate")])],1)]):e._e(),s("b-loading",{attrs:{"is-full-page":!0,active:e.isWaiting,"can-cancel":!1},on:{"update:active":function(t){e.isWaiting=t}}})],1)},ie=[],re={beforeDestroy:function(){clearInterval(this.update)},created:function(){this.updateHosts(),this.periodicUpdateHosts()},methods:{updateHosts:function(){var e=this;this.$http.get("hosts").then((function(t){t.json().then((function(t){0==t.hosts.length?e.isWaiting=!0:(e.hosts=t.hosts,e.isWaiting=!1)}))}),(function(t){console.log("Getting the hosts failed with "+t+" response."),e.isWaiting=!1,e.$buefy.toast.open({message:"Getting the hosts failed.",type:"is-danger",duration:4e3})}))},periodicUpdateHosts:function(){var e=this;this.update=setInterval((function(){e.updateHosts()}),1e4)},decorator:function(e,t){var s=e/t;return s<.65?"is-success":s>=.65&&s<.85?"is-warning":"is-danger"}},computed:{paginationNeeded:function(){return!(this.hosts.length<=10)}},data:function(){return{table:{isPaginated:!0,perPage:10,currentPage:1,isPaginationSimple:!0,paginationSize:"is-small",defaultSortDirection:"asc"},hosts:[],isWaiting:!0}}},oe=re,le=Object(d["a"])(oe,ne,ie,!1,null,null,null),ce=le.exports,ue=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{attrs:{id:"signin"}},[s("b-modal",{attrs:{active:e.signUpModal,"has-modal-card":""},on:{"update:active":function(t){e.signUpModal=t}}},[s("div",{staticClass:"modal-card",staticStyle:{width:"auto"}},[s("header",{staticClass:"modal-card-head"},[s("p",{staticClass:"modal-card-title"},[e._v("Create a New Account")])]),s("section",{staticClass:"modal-card-body"},[s("b-field",{attrs:{label:"User Name",type:{"is-danger":e.userExists},message:{"User already exists":e.userExists}}},[s("b-input",{attrs:{type:"text",minlength:"4",maxlength:"32",autofocus:""},model:{value:e.username,callback:function(t){e.username=t},expression:"username"}})],1),s("b-field",{attrs:{label:"First Name"}},[s("b-input",{attrs:{type:"text"},model:{value:e.first_name,callback:function(t){e.first_name=t},expression:"first_name"}})],1),s("b-field",{attrs:{label:"Last Name"}},[s("b-input",{attrs:{type:"text"},model:{value:e.last_name,callback:function(t){e.last_name=t},expression:"last_name"}})],1),s("b-field",{attrs:{label:"Password"}},[s("b-input",{attrs:{type:"password",minlength:"8",maxlength:"32"},model:{value:e.password,callback:function(t){e.password=t},expression:"password"}})],1),s("b-field",{attrs:{label:"Confirm Password"}},[s("b-input",{attrs:{type:"password",minlength:"8",maxlength:"32"},nativeOn:{keyup:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.create(t)}},model:{value:e.confirmPassword,callback:function(t){e.confirmPassword=t},expression:"confirmPassword"}})],1)],1),s("footer",{staticClass:"modal-card-foot buttons is-right"},[s("button",{staticClass:"button is-light",on:{click:e.create}},[e._v("Create User")])])])]),s("div",{staticClass:"signin-form"},[s("b-field",{attrs:{label:"Username"}},[s("b-input",{attrs:{type:"text",autofocus:""},model:{value:e.username,callback:function(t){e.username=t},expression:"username"}})],1),s("b-field",{attrs:{label:"Password"}},[s("b-input",{attrs:{type:"password"},nativeOn:{keyup:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.onSubmit(t)}},model:{value:e.password,callback:function(t){e.password=t},expression:"password"}})],1),s("b-checkbox",{attrs:{type:"is-light",size:"is-small","native-value":"false"},model:{value:e.rememberMe,callback:function(t){e.rememberMe=t},expression:"rememberMe"}},[e._v("Remember me")]),s("br"),s("button",{staticClass:"button is-light",on:{click:e.onSubmit}},[e._v("Submit")]),s("button",{staticClass:"button is-pulled-right is-small is-text",on:{click:function(t){e.signUpModal=!0}}},[e._v("Create Account")])],1)],1)},pe=[],de={methods:{onSubmit:function(){var e=this;return this.username?this.password?void this.$http.get("login?user="+this.username+"&pass="+this.password).then((function(t){t.json().then((function(t){e.$store.commit("LOGIN",{user:t,remember:e.rememberMe})}))}),(function(t){401==t.status?(e.$buefy.toast.open({message:"The email and/or password is incorrect",type:"is-warning",duration:4e3}),e.username=null,e.password=null):0==t.status?(e.$buefy.toast.open({message:"The data server is not available.",type:"is-danger",duration:6e3}),e.username=null,e.password=null):(e.$buefy.toast.open({message:"Getting the user information failed.",type:"is-danger",duration:4e3}),e.username=null,e.password=null)})):(this.$buefy.toast.open({message:"You must include a password",type:"is-warning",duration:4e3}),{}):(this.$buefy.toast.open({message:"You must include an email address",type:"is-warning",duration:4e3}),{})},create:function(){var e=this;return this.username?this.first_name?this.last_name?this.password?this.confirmPassword?this.password!=this.confirmPassword?(this.$buefy.toast.open({message:"Your passwords do not match",type:"is-warning",duration:4e3}),{}):(this.$http.post("signup",{username:this.username,password:this.password,first_name:this.first_name,last_name:this.last_name}).then((function(t){return t.json().then((function(t){e.$store.commit("SIGN_UP",t)}))}),(function(t){e.$buefy.toast.open({message:"Posting the new user "+e.username+" information failed.",type:"is-danger",duration:4e3}),e.username=null,e.password=null})),void(this.signUpModal=!1)):(this.$buefy.toast.open({message:"You must include a password confirmation",type:"is-warning",duration:4e3}),{}):(this.$buefy.toast.open({message:"You must include a password",type:"is-warning",duration:4e3}),{}):(this.$buefy.toast.open({message:"You must include a last name",type:"is-warning",duration:4e3}),{}):(this.$buefy.toast.open({message:"You must include a first name",type:"is-warning",duration:4e3}),{}):(this.$buefy.toast.open({message:"You must include an username",type:"is-warning",duration:4e3}),{})}},data:function(){return{signUpModal:!1,username:null,password:null,confirmPassword:null,first_name:null,last_name:null,rememberMe:!1,userExists:!1}}},me=de,he=(s("5ea9"),Object(d["a"])(me,ue,pe,!1,null,"4e710108",null)),fe=he.exports,ge=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{staticClass:"content"},[s("b-modal",{attrs:{active:e.isCreateActive,"on-cancel":e.resetLocalUser,"has-modal-card":""},on:{"update:active":function(t){e.isCreateActive=t}}},[s("div",{staticClass:"modal-card",staticStyle:{width:"25em"}},[s("header",{staticClass:"modal-card-head"},[s("p",{staticClass:"modal-card-title"},[e._v("Create a New User")])]),s("section",{staticClass:"modal-card-body"},[s("b-field",{attrs:{label:"User Name",type:{"is-danger":e.userExists},message:{"User already exists":e.userExists}}},[s("b-input",{attrs:{type:"text",minlength:"4",maxlength:"32",autofocus:""},model:{value:e.user.username,callback:function(t){e.$set(e.user,"username",t)},expression:"user.username"}})],1),s("b-field",{attrs:{label:"First Name"}},[s("b-input",{attrs:{type:"text"},model:{value:e.user.first_name,callback:function(t){e.$set(e.user,"first_name",t)},expression:"user.first_name"}})],1),s("b-field",{attrs:{label:"Last Name"}},[s("b-input",{attrs:{type:"text"},model:{value:e.user.last_name,callback:function(t){e.$set(e.user,"last_name",t)},expression:"user.last_name"}})],1),s("b-field",{attrs:{label:"Password"}},[s("b-input",{attrs:{type:"password",minlength:"8",maxlength:"32"},model:{value:e.user.password,callback:function(t){e.$set(e.user,"password",t)},expression:"user.password"}})],1),s("b-field",{attrs:{label:"Confirm Password"}},[s("b-input",{attrs:{type:"password",minlength:"8",maxlength:"32"},model:{value:e.user.confirmPassword,callback:function(t){e.$set(e.user,"confirmPassword",t)},expression:"user.confirmPassword"}})],1),s("b-field",{attrs:{label:"Role"}},[s("b-select",{attrs:{expanded:""},model:{value:e.user.role_name,callback:function(t){e.$set(e.user,"role_name",t)},expression:"user.role_name"}},e._l(e.roles,(function(t){return s("option",[e._v("\n              "+e._s(t)+"\n            ")])})),0)],1),s("b-tooltip",{attrs:{label:"resource names can include wildcards for broad  \n                assignment (ex. *inv*); they can also include `!` to not   \n                allow access to a resource (ex. !*inv*)",type:"is-light is-right",multilined:""}},[s("b-field",{attrs:{label:"Resource Name(s)"}}),s("b-icon",{staticStyle:{color:"#383838"},attrs:{icon:"question-circle"}})],1),s("b-input",{attrs:{type:"text"},model:{value:e.user.resource_names,callback:function(t){e.$set(e.user,"resource_names",t)},expression:"user.resource_names"}})],1),s("footer",{staticClass:"modal-card-foot buttons is-right"},[s("button",{staticClass:"button is-light",on:{click:e.createUser}},[e._v("Create User")])])])]),s("b-modal",{attrs:{active:e.isEditActive,"on-cancel":e.resetLocalUser,"has-modal-card":""},on:{"update:active":function(t){e.isEditActive=t}}},[s("div",{staticClass:"modal-card",staticStyle:{width:"25em"}},[s("header",{staticClass:"modal-card-head"},[s("p",{staticClass:"modal-card-title"},[e._v("User "+e._s(e.user.username))])]),s("section",{staticClass:"modal-card-body"},[s("b-field",{attrs:{label:"First Name"}},[s("b-input",{attrs:{type:"text",autofocus:""},model:{value:e.user.first_name,callback:function(t){e.$set(e.user,"first_name",t)},expression:"user.first_name"}})],1),s("b-field",{attrs:{label:"Last Name"}},[s("b-input",{attrs:{type:"text"},model:{value:e.user.last_name,callback:function(t){e.$set(e.user,"last_name",t)},expression:"user.last_name"}})],1),s("b-field",{attrs:{label:"Role"}},[s("b-select",{attrs:{expanded:""},model:{value:e.user.role_name,callback:function(t){e.$set(e.user,"role_name",t)},expression:"user.role_name"}},e._l(e.roles,(function(t){return s("option",[e._v("\n              "+e._s(t)+"\n            ")])})),0)],1),s("b-field",{attrs:{label:"Resource Name(s)"}},[s("b-input",{attrs:{type:"text"},model:{value:e.user.resource_names,callback:function(t){e.$set(e.user,"resource_names",t)},expression:"user.resource_names"}})],1)],1),s("footer",{staticClass:"modal-card-foot buttons is-right"},[s("button",{staticClass:"button is-light",on:{click:e.updateUser}},[e._v("Update User")])])])]),[s("hr"),s("b-field",{attrs:{grouped:"",position:"is-right"}},[e.adminUser()?s("p",{staticClass:"control"},[s("b-tooltip",{attrs:{label:"create a new user",type:"is-light is-left"}},[s("button",{staticClass:"button is-light",on:{click:function(t){e.isCreateActive=!0}}},[s("b-icon",{attrs:{icon:"plus"}})],1)])],1):e._e()]),s("div",[s("b-table",{attrs:{data:e.users,paginated:e.table.isPaginated&&e.paginationNeeded,"per-page":e.table.perPage,"current-page":e.table.currentPage,"pagination-simple":e.table.isPaginationSimple,"pagination-size":e.table.paginationSize,"default-sort-direction":e.table.defaultSortDirection,"default-sort":"username"},on:{"update:currentPage":function(t){return e.$set(e.table,"currentPage",t)},"update:current-page":function(t){return e.$set(e.table,"currentPage",t)}},scopedSlots:e._u([{key:"default",fn:function(t){return[s("b-table-column",{attrs:{field:"username",label:"User",sortable:""}},[e.adminUser()?[s("b-tooltip",{attrs:{label:"change user settings",type:"is-dark"}},[s("div",{staticClass:"field"},[s("div",{on:{click:function(s){return e.editUser(t.row.username)}}},[e._v("\n                    "+e._s(t.row.username)+"\n                  ")])])])]:[e._v("\n              "+e._s(t.row.username)+"\n            ")]],2),s("b-table-column",{attrs:{field:"first_name",label:"First Name"}},[e._v("\n            "+e._s(t.row.first_name)+"\n          ")]),s("b-table-column",{attrs:{field:"last_name",label:"Last Name",sortable:""}},[e._v("\n            "+e._s(t.row.last_name)+"\n          ")]),s("b-table-column",{attrs:{field:"role",label:"Role",sortable:""}},[e._v("\n            "+e._s(t.row.role?t.row.role.name:"Not yet assigned")+"\n          ")]),e.adminUser()?s("b-table-column",{attrs:{label:"Delete",width:"50",centered:""}},[s("button",{staticClass:"button is-light is-small",on:{click:function(s){return e.deleteUser(t.row.username)}}},[s("b-icon",{attrs:{icon:"trash"}})],1)]):e._e()]}}])}),e.paginationNeeded?s("b-field",{attrs:{grouped:"",position:"is-right"}},[s("div",{staticClass:"control is-flex"},[s("b-switch",{attrs:{size:"is-small",type:"is-light"},model:{value:e.table.isPaginated,callback:function(t){e.$set(e.table,"isPaginated",t)},expression:"table.isPaginated"}},[e._v("Pagenate")])],1)]):e._e()],1)],s("b-loading",{attrs:{"is-full-page":!0,active:e.isWaiting,"can-cancel":!1},on:{"update:active":function(t){e.isWaiting=t}}})],2)},be=[],ve={beforeDestroy:function(){clearInterval(this.update),this.ws.close()},created:function(){var e=Object(T["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,this.wsConnect();case 3:this.ws=e.sent,e.next=10;break;case 6:return e.prev=6,e.t0=e["catch"](0),console.log("unable to connect to WebSocket: "+e.t0),e.abrupt("return");case 10:this.ws.onmessage=this.handler,this.updateUsers();case 12:case"end":return e.stop()}}),e,this,[[0,6]])})));function t(){return e.apply(this,arguments)}return t}(),computed:{paginationNeeded:function(){return!(this.users.length<=10)}},methods:{handler:function(e){var t=this;e.data.split(/\r?\n/).forEach((function(e){var s=JSON.parse(e);t.handle(s)}))},handle:function(e){if("user"==e.resource.type){var t=this.users;switch(e.resource.action){case"create":var s=e.result;s.role.resource_names=s.role.resource_names.join(" "),t.push(s),this.users=Object(P["a"])(t),this.$buefy.toast.open({message:"The "+e.resource.name+" user was created.",type:"is-success"});break;case"update":for(var a=0;a<t.length;a++)if(t[a].username==e.resource.name){var n=e.result;n.role.resource_names=n.role.resource_names.join(" "),t[a]=n;break}this.users=Object(P["a"])(t),this.$buefy.toast.open({message:"The "+e.resource.name+" user was updated.",type:"is-success"});break;case"delete":for(var i=0;i<t.length;i++)if(t[i].username==e.resource.name){t.splice(i,1);break}this.users=Object(P["a"])(t),this.$buefy.toast.open({message:"The "+e.resource.name+" user was deleted.",type:"is-success"});break}}},updateUsers:function(){var e=this;this.$http.get("users").then((function(t){t.json().then((function(t){e.users=t.users,e.isWaiting=!1}))}),(function(t){e.$buefy.toast.open({message:"Getting the users failed.",type:"is-danger",duration:4e3}),e.isWaiting=!1}))},adminUser:function(){return["Global Admin","Experiment Admin"].includes(this.$store.getters.role)},experimentUser:function(){return["Global Admin","Experiment Admin","Experiment User"].includes(this.$store.getters.role)},createUser:function(){for(var e=this,t=0;t<this.users.length;t++)if(this.users[t].username==this.user.username)return void(this.userExists=!0);if(this.user.username)if(this.user.first_name)if(this.user.last_name)if(this.user.password)if(this.user.confirmPassword)if(this.user.password==this.user.confirmPassword)if(delete this.user.confirmPassword,this.user.role_name){this.user.resource_names&&(this.user.resource_names=this.user.resource_names.split(" ")),this.isWaiting=!0;var s=this.user.username;this.$http.post("users",this.user).then((function(t){e.isWaiting=!1}),(function(t){e.$buefy.toast.open({message:"Creating the user "+s+" failed with "+t.status+" status.",type:"is-danger",duration:4e3}),e.isWaiting=!1})),this.resetLocalUser(),this.isCreateActive=!1}else this.$buefy.toast.open({message:"You must select a role",type:"is-warning",duration:4e3});else this.$buefy.toast.open({message:"Your passwords do not match",type:"is-warning",duration:4e3});else this.$buefy.toast.open({message:"You must include a password confirmation",type:"is-warning",duration:4e3});else this.$buefy.toast.open({message:"You must include a password",type:"is-warning",duration:4e3});else this.$buefy.toast.open({message:"You must include a last name",type:"is-warning",duration:4e3});else this.$buefy.toast.open({message:"You must include a first name",type:"is-warning",duration:4e3});else this.$buefy.toast.open({message:"You must include an username",type:"is-warning",duration:4e3})},editUser:function(e){for(var t=0;t<this.users.length;t++)if(this.users[t].username==e){this.user=this.users[t];break}if(this.user.role){this.user.role_name=this.user.role.name;for(var s=[],a=0;a<this.user.role.policies.length;a++){var n=this.user.role.policies[a],i=["disks","hosts","users"];if(!i.includes(n.resources[0])&&n.resource_names)for(var r=0;r<n.resource_names.length;r++)s.push(n.resource_names[r])}this.user.resource_names=_.uniq(s).join(" ")}this.isEditActive=!0},updateUser:function(){var e=this;if(this.$store.getters.username==this.user.username&&this.$store.getters.role!=this.user.role_name)return this.$buefy.toast.open({message:"You cannot change the role of the user you are currently logged in as.",type:"is-danger",duration:5e3}),this.resetLocalUser(),this.isWaiting=!1,void(this.isEditActive=!1);delete this.user.id,delete this.user.role;var t=this.user;t.resource_names=t.resource_names.split(" "),this.isEditActive=!1,this.isWaiting=!0,this.$http.patch("users/"+t.username,t).then((function(s){for(var a=e.users,n=0;n<a.length;n++)if(a[n].username==t.username){a[n]=t;break}e.users=Object(P["a"])(a),e.isWaiting=!1}),(function(s){e.$buefy.toast.open({message:"Updating the "+t.username+" user failed with "+s.status+" status.",type:"is-danger",duration:4e3}),e.isWaiting=!1})),this.resetLocalUser()},deleteUser:function(e){var t=this;e!==this.$store.getters.username?this.$buefy.dialog.confirm({title:"Delete the User",message:"This will DELETE the "+e+" user. Are you sure you want to do this?",cancelText:"Cancel",confirmText:"Delete",type:"is-danger",hasIcon:!0,onConfirm:function(){t.isWaiting=!0,t.$http.delete("users/"+e).then((function(s){for(var a=t.users,n=0;n<a.length;n++)if(a[n].username==e){a.splice(n,1);break}t.users=Object(P["a"])(a),t.$buefy.toast.open({message:"The user "+e+" was deleted.",type:"is-success"}),t.isWaiting=!1}),(function(s){t.$buefy.toast.open({message:"Deleting the user "+e+" failed with "+s.status+" status.",type:"is-danger",duration:4e3})}))}}):this.$buefy.toast.open({message:"You cannot delete the user you are currently logged in as.",type:"is-danger",duration:4e3})},resetLocalUser:function(){this.user={}}},data:function(){return{table:{striped:!0,isPaginated:!0,isPaginationSimple:!0,paginationSize:"is-small",defaultSortDirection:"asc",currentPage:1,perPage:10},roles:["Global Admin","Experiment Admin","Experiment User","Experiment Viewer","VM Viewer"],users:[],user:{},userExists:!1,isCreateActive:!1,isEditActive:!1,isWaiting:!0}}},ye=ve,xe=Object(d["a"])(ye,ge,be,!1,null,null,null),_e=xe.exports,we=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{staticClass:"content"},[0==e.logs.length?[e._m(0)]:[s("hr"),s("b-field",{attrs:{position:"is-right"}},[s("b-autocomplete",{attrs:{placeholder:"Search a log",icon:"search",data:e.filteredData},on:{select:function(t){return e.filtered=t}},model:{value:e.searchLog,callback:function(t){e.searchLog=t},expression:"searchLog"}},[s("template",{slot:"empty"},[e._v("\n          No results found\n        ")])],2),s("p",{staticClass:"control"},[s("button",{staticClass:"button",staticStyle:{color:"#686868"},on:{click:function(t){e.searchLog=""}}},[s("b-icon",{attrs:{icon:"window-close"}})],1)])],1),s("div",[s("b-table",{attrs:{data:e.filteredLogs,paginated:e.table.isPaginated&&e.paginationNeeded,"per-page":e.table.perPage,"current-page":e.table.currentPage,"pagination-simple":e.table.isPaginationSimple,"pagination-size":e.table.paginationSize,"default-sort-direction":e.table.defaultSortDirection,"default-sort":"timestamp"},on:{"update:currentPage":function(t){return e.$set(e.table,"currentPage",t)},"update:current-page":function(t){return e.$set(e.table,"currentPage",t)}},scopedSlots:e._u([{key:"default",fn:function(t){return[s("b-table-column",{attrs:{field:"timestamp",label:"Timestamp",width:"200",sortable:""}},[e._v("\n            "+e._s(t.row.timestamp)+"\n          ")]),s("b-table-column",{attrs:{field:"source",label:"Source",sortable:"",centered:""}},[e._v("\n            "+e._s(t.row.source)+"\n          ")]),s("b-table-column",{attrs:{field:"level",label:"Level",centered:""}},[s("span",{staticClass:"tag",class:e.decorator(t.row.level)},[e._v("\n              "+e._s(t.row.level)+"\n            ")])]),s("b-table-column",{attrs:{field:"log",label:"Log"}},[e._v("\n            "+e._s(t.row.log)+"\n          ")])]}}])}),e.paginationNeeded?s("b-field",{attrs:{grouped:"",position:"is-right"}},[s("div",{staticClass:"control is-flex"},[s("b-switch",{attrs:{size:"is-small",type:"is-light"},model:{value:e.table.isPaginated,callback:function(t){e.$set(e.table,"isPaginated",t)},expression:"table.isPaginated"}},[e._v("Pagenate")])],1)]):e._e()],1)]],2)},ke=[function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("section",{staticClass:"hero is-light is-bold is-large"},[s("div",{staticClass:"hero-body"},[s("div",{staticClass:"container",staticStyle:{"text-align":"center"}},[s("h1",{staticClass:"title"},[e._v("\n            There are no logs!\n          ")])])])])}],Me={beforeDestroy:function(){this.ws&&this.ws.close(),this.logs=[],console.log("destroyed "+this.logs.length)},created:function(){var e=Object(T["a"])(regeneratorRuntime.mark((function e(){var t,s,a;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return console.log("created "+this.logs.length),e.prev=1,e.next=4,this.$http.get("logs");case 4:return t=e.sent,e.next=7,t.json();case 7:s=e.sent,s&&(a=this.logs).push.apply(a,Object(P["a"])(s.logs)),e.next=14;break;case 11:e.prev=11,e.t0=e["catch"](1),this.$buefy.toast.open({message:"Getting the past hour of logs failed with "+e.t0.status+" status.",type:"is-danger",duration:4e3});case 14:return e.prev=14,e.prev=15,e.next=18,this.wsConnect();case 18:this.ws=e.sent,e.next=25;break;case 21:return e.prev=21,e.t1=e["catch"](15),console.log("unable to connect to WebSocket: "+e.t1),e.abrupt("return");case 25:return this.ws.onmessage=this.handler,e.finish(14);case 27:case"end":return e.stop()}}),e,this,[[1,11,14,27],[15,21]])})));function t(){return e.apply(this,arguments)}return t}(),computed:{filteredLogs:function(){for(var e=this.logs,t={sources:[],levels:[]},s=this.searchLog.split(" "),a=s.length-1;a>=0;a--){var n=s[a];if(n.includes(":")){var i=n.split(":");switch(i[0].toLowerCase()){case"source":t["sources"]=t["sources"].concat(i[1].split(",").map((function(e){return e.toLowerCase()})));break;case"level":t["levels"]=t["levels"].concat(i[1].split(",").map((function(e){return e.toLowerCase()})));break}s.splice(a,1)}}var r=new RegExp(s.join(" "),"i"),o=[];for(var l in e){var c=e[l];(0==t["sources"].length||t["sources"].includes(c.source.toLowerCase()))&&(0==t["levels"].length||t["levels"].includes(c.level.toLowerCase()))&&c.log.match(r)&&o.push(c)}return o},filteredData:function(){var e=this,t=this.logs.map((function(e){return e.log}));return t.filter((function(t){return t.toString().toLowerCase().indexOf(e.searchLog.toLowerCase())>=0}))},paginationNeeded:function(){return!(this.logs.length<=10)}},methods:{handler:function(e){var t=this;console.log(this.logs.length),e.data.split(/\r?\n/).forEach((function(e){var s=JSON.parse(e);t.handle(s)}))},handle:function(e){"log"==e.resource.type&&this.logs.push(e.result)},decorator:function(e){return"ERROR"==e||"FATAL"==e?"is-danger":"WARN"==e?"is-warning":"INFO"==e?"is-info":"is-primary"}},data:function(){return{table:{striped:!0,isPaginated:!0,isPaginationSimple:!0,paginationSize:"is-small",defaultSortDirection:"desc",currentPage:1,perPage:10},logs:[],searchLog:""}}},Ce=Me,$e=(s("3089"),Object(d["a"])(Ce,we,ke,!1,null,"4df5d6d3",null)),Se=$e.exports,Pe=s("2f62");a["a"].use(Pe["a"]);var Te=new Pe["a"].Store({state:{username:null,token:null,role:null,auth:null},mutations:{LOGIN:function(e,t){var s=t.user,a=t.remember;e.username=s.username,e.token=s.token,e.role=s.role,e.auth=!0,a&&(localStorage.setItem("user",e.username),localStorage.setItem("token",e.token),localStorage.setItem("role",e.role),localStorage.setItem("auth",e.auth)),"VM Viewer"===e.role?We.replace("/vmtiles"):We.replace("/experiments")},LOGOUT:function(e){e.username=null,e.token=null,e.role=null,e.auth=!1,e.logs=[],localStorage.getItem("auth")&&(localStorage.removeItem("user"),localStorage.removeItem("token"),localStorage.removeItem("role"),localStorage.setItem("auth",e.auth)),We.replace("/signin")}},getters:{username:function(e){return e.username},token:function(e){return e.token},role:function(e){return e.role},auth:function(e){return e.auth}}});a["a"].use(C["a"]);var Ee=new C["a"]({mode:"history",base:"/",routes:[{path:"/",name:"home",redirect:"/experiments"},{path:"/experiments",name:"experiments",component:V},{path:"/experiment/:id",name:"experiment",component:ae},{path:"/vmtiles",name:"vmtiles",component:X},{path:"/hosts",name:"hosts",component:ce},{path:"/users",name:"users",component:_e},{path:"/log",name:"log",component:Se},{path:"/signin",name:"signin",component:fe},{path:"*",redirect:"/signin"}]});Ee.beforeEach((function(e,t,s){if("disabled"!==Object({NODE_ENV:"production",BASE_URL:"/"}).VUE_APP_AUTH){var a=["/signup","/signin"];a.includes(e.path)?s():Te.state.auth?s():s("/signin")}else s()}));var We=Ee,Ne=s("c074"),Ve=s("ecee"),Oe=s("ad3d");Ve["c"].add(Ne["a"]),Ve["c"].add(Ne["b"]),a["a"].component("font-awesome-icon",Oe["a"]),a["a"].config.productionTip=!1,a["a"].use(i["a"],{defaultIconPack:"fa"}),a["a"].use(n["a"]),a["a"].mixin({methods:{wsConnect:function(){return new Promise((function(e,t){var s=new WebSocket("ws://"+location.host+"/api/v1/ws?token="+Te.state.token);s.onopen=function(){e(s)},s.onerror=function(e){t(e)}}))}}}),a["a"].filter("lowercase",(function(e){return null==e?e:e.toLowerCase()})),a["a"].filter("stringify",(function(e){return null==e||0==e.length?"none":e.join(", ")})),a["a"].filter("ram",(function(e){if(0==e)return"0 Byte";var t=["MB","GB"],s=parseInt(Math.floor(Math.log(e)/Math.log(1024))),a=Math.round(e/Math.pow(1024,s),2)+" "+t[s];return a})),a["a"].filter("uptime",(function(e){var t=null;if(null==e)return e;var s=parseInt(e,10),a=Math.floor(s/86400);s-=3600*a*24;var n=Math.floor(s/3600);s-=3600*n;var i=Math.floor(s/60);return s-=60*i,t=a>=1?a+" days, "+("0"+n).slice(-2)+":"+("0"+i).slice(-2)+":"+("0"+s).slice(-2):("0"+n).slice(-2)+":"+("0"+i).slice(-2)+":"+("0"+s).slice(-2),t})),a["a"].http.options.root="/api/v1/",a["a"].http.interceptors.push((function(e){return Te.state.token&&e.headers.set("Authorization","bearer "+Te.state.token),function(e){401===e.status&&(Te.commit("LOGOUT"),We.replace("/signin"))}})),new a["a"]({router:We,store:Te,render:function(e){return e(M)}}).$mount("#app")},"5c0b":function(e,t,s){"use strict";var a=s("5e27"),n=s.n(a);n.a},"5e27":function(e,t,s){},"5ea9":function(e,t,s){"use strict";var a=s("f7e5"),n=s.n(a);n.a},8174:function(e,t,s){"use strict";var a=s("ac4c"),n=s.n(a);n.a},ac4c:function(e,t,s){},b4d0:function(e,t,s){},c50c:function(e,t,s){"use strict";var a=s("06b2"),n=s.n(a);n.a},d82d:function(e,t,s){"use strict";var a=s("2fa6"),n=s.n(a);n.a},f7e5:function(e,t,s){},f898:function(e,t,s){e.exports=s.p+"assets/img/redeploying.9ae0addb.png"}});
//# sourceMappingURL=app.f94cef68.js.map